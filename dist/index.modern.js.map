{"version":3,"file":"index.modern.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/components/task-list/task-list-header.tsx","../src/components/task-list/useProvideChipColors.ts","../src/components/task-list/task-list-table.tsx","../src/components/other/vertical-scroll.tsx","../src/components/task-list/task-list.tsx","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/components/other/arrow.tsx","../src/components/other/relation-line.tsx","../src/helpers/get-relation-circle-by-coordinates.ts","../src/helpers/bar-helper.ts","../src/helpers/other-helper.ts","../node_modules/classnames/index.js","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar-date-handle.tsx","../src/components/task-item/bar/bar-relation-handle.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/helpers/resolve-project-color.ts","../src/components/task-item/bar/bar.tsx","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["import { BarTask } from \"./bar-task\";\r\nimport { RelationMoveTarget } from \"./gantt-task-actions\";\r\n\r\nexport enum ViewMode {\r\n  Hour = \"Hour\",\r\n  QuarterDay = \"Quarter Day\",\r\n  HalfDay = \"Half Day\",\r\n  Day = \"Day\",\r\n  /** ISO-8601 week */\r\n  Week = \"Week\",\r\n  Month = \"Month\",\r\n  Year = \"Year\",\r\n}\r\n\r\nexport type OnRelationChange = (\r\n  from: [Task, RelationMoveTarget],\r\n  to: [Task, RelationMoveTarget]\r\n) => void;\r\n\r\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\r\nexport interface Task {\r\n  id: string;\r\n  projectManager?: string;\r\n  progressColor: string;\r\n  type: TaskType;\r\n  name: string;\r\n  start: Date;\r\n  end: Date;\r\n  prevStart?: Date;\r\n  prevEnd?: Date;\r\n  /**\r\n   * From 0 to 100\r\n   */\r\n  progress: number;\r\n  styles?: {\r\n    backgroundColor?: string;\r\n    backgroundSelectedColor?: string;\r\n    progressColor?: string;\r\n    progressSelectedColor?: string;\r\n  };\r\n  isDisabled?: boolean;\r\n  project?: string;\r\n  dependencies?: string[];\r\n  hideChildren?: boolean;\r\n  displayOrder?: number;\r\n  color?: string;\r\n}\r\n\r\nexport interface EventOption {\r\n  /**\r\n   * Time step value for date changes.\r\n   */\r\n  timeStep?: number;\r\n  /**\r\n   * Invokes on bar select on unselect.\r\n   */\r\n  onSelect?: (task: Task, isSelected: boolean) => void;\r\n  /**\r\n   * Invokes on bar double click.\r\n   */\r\n  onDoubleClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on bar click.\r\n   */\r\n  onClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\r\n   */\r\n  onDateChange?: (\r\n    task: Task,\r\n    children: BarTask[],\r\n    changedTasks: BarTask[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n\r\n  /**\r\n   * Invokes new relation between tasks\r\n   */\r\n  onRelationChange?: OnRelationChange;\r\n  /**\r\n   * Invokes on progress change. Chart undoes operation if method return false or error.\r\n   */\r\n  onProgressChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\r\n   */\r\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on expander on task list\r\n   */\r\n  onExpanderClick?: (task: Task) => void;\r\n}\r\n\r\nexport interface DisplayOption {\r\n  viewMode?: ViewMode;\r\n  viewDate?: Date;\r\n  preStepsCount?: number;\r\n  /**\r\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\r\n   */\r\n  locale?: string;\r\n  rtl?: boolean;\r\n}\r\n\r\nexport interface StylingOption {\r\n  headerHeight?: number;\r\n  columnWidth?: number;\r\n  listCellWidth?: string;\r\n  rowHeight?: number;\r\n  relationCircleOffset?: number;\r\n  relationCircleRadius?: number;\r\n  ganttHeight?: number;\r\n  barCornerRadius?: number;\r\n  handleWidth?: number;\r\n  fontFamily?: string;\r\n  fontSize?: string;\r\n  /**\r\n   * How many of row width can be taken by task.\r\n   * From 0 to 100\r\n   */\r\n  barFill?: number;\r\n  barProgressColor?: string;\r\n  barProgressSelectedColor?: string;\r\n  barBackgroundColor?: string;\r\n  barBackgroundSelectedColor?: string;\r\n  projectProgressColor?: string;\r\n  projectProgressSelectedColor?: string;\r\n  projectBackgroundColor?: string;\r\n  projectBackgroundSelectedColor?: string;\r\n  milestoneBackgroundColor?: string;\r\n  milestoneBackgroundSelectedColor?: string;\r\n  arrowColor?: string;\r\n  arrowIndent?: number;\r\n  todayColor?: string;\r\n  TooltipContent?: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n  TaskListHeader?: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable?: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    /**\r\n     * Sets selected task by id\r\n     */\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n}\r\n\r\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\r\n  tasks: Task[];\r\n}\r\n","import { Task, ViewMode } from \"../types/public-types\";\r\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\r\nimport DateTimeFormat = Intl.DateTimeFormat;\r\n\r\ntype DateHelperScales =\r\n  | \"year\"\r\n  | \"month\"\r\n  | \"day\"\r\n  | \"hour\"\r\n  | \"minute\"\r\n  | \"second\"\r\n  | \"millisecond\";\r\n\r\nconst intlDTCache = {};\r\nexport const getCachedDateTimeFormat = (\r\n  locString: string | string[],\r\n  opts: DateTimeFormatOptions = {}\r\n): DateTimeFormat => {\r\n  const key = JSON.stringify([locString, opts]);\r\n  let dtf = intlDTCache[key];\r\n  if (!dtf) {\r\n    dtf = new Intl.DateTimeFormat(locString, opts);\r\n    intlDTCache[key] = dtf;\r\n  }\r\n  return dtf;\r\n};\r\n\r\nexport const addToDate = (\r\n  date: Date,\r\n  quantity: number,\r\n  scale: DateHelperScales\r\n) => {\r\n  const newDate = new Date(\r\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\r\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\r\n    date.getDate() + (scale === \"day\" ? quantity : 0),\r\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\r\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\r\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\r\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\r\n  const scores = [\r\n    \"millisecond\",\r\n    \"second\",\r\n    \"minute\",\r\n    \"hour\",\r\n    \"day\",\r\n    \"month\",\r\n    \"year\",\r\n  ];\r\n\r\n  const shouldReset = (_scale: DateHelperScales) => {\r\n    const maxScore = scores.indexOf(scale);\r\n    return scores.indexOf(_scale) <= maxScore;\r\n  };\r\n  const newDate = new Date(\r\n    date.getFullYear(),\r\n    shouldReset(\"year\") ? 0 : date.getMonth(),\r\n    shouldReset(\"month\") ? 1 : date.getDate(),\r\n    shouldReset(\"day\") ? 0 : date.getHours(),\r\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\r\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\r\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const ganttDateRange = (\r\n  tasks: Task[],\r\n  viewMode: ViewMode,\r\n  preStepsCount: number\r\n) => {\r\n  let newStartDate: Date = tasks[0].start;\r\n  let newEndDate: Date = tasks[0].start;\r\n  for (const task of tasks) {\r\n    if (task.start < newStartDate) {\r\n      newStartDate = task.start;\r\n    }\r\n    if (task.end > newEndDate) {\r\n      newEndDate = task.end;\r\n    }\r\n  }\r\n  switch (viewMode) {\r\n    case ViewMode.Year:\r\n      newStartDate = addToDate(newStartDate, -1, \"year\");\r\n      newStartDate = startOfDate(newStartDate, \"year\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Month:\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Week:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(\r\n        getMonday(newStartDate),\r\n        -7 * preStepsCount,\r\n        \"day\"\r\n      );\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\r\n      break;\r\n    case ViewMode.Day:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 19, \"day\");\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\r\n      break;\r\n    case ViewMode.HalfDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\r\n      break;\r\n    case ViewMode.Hour:\r\n      newStartDate = startOfDate(newStartDate, \"hour\");\r\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1, \"day\");\r\n      break;\r\n  }\r\n  return [newStartDate, newEndDate];\r\n};\r\n\r\nexport const seedDates = (\r\n  startDate: Date,\r\n  endDate: Date,\r\n  viewMode: ViewMode\r\n) => {\r\n  let currentDate: Date = new Date(startDate);\r\n  const dates: Date[] = [currentDate];\r\n  while (currentDate < endDate) {\r\n    switch (viewMode) {\r\n      case ViewMode.Year:\r\n        currentDate = addToDate(currentDate, 1, \"year\");\r\n        break;\r\n      case ViewMode.Month:\r\n        currentDate = addToDate(currentDate, 1, \"month\");\r\n        break;\r\n      case ViewMode.Week:\r\n        currentDate = addToDate(currentDate, 7, \"day\");\r\n        break;\r\n      case ViewMode.Day:\r\n        currentDate = addToDate(currentDate, 1, \"day\");\r\n        break;\r\n      case ViewMode.HalfDay:\r\n        currentDate = addToDate(currentDate, 12, \"hour\");\r\n        break;\r\n      case ViewMode.QuarterDay:\r\n        currentDate = addToDate(currentDate, 6, \"hour\");\r\n        break;\r\n      case ViewMode.Hour:\r\n        currentDate = addToDate(currentDate, 1, \"hour\");\r\n        break;\r\n    }\r\n    dates.push(currentDate);\r\n  }\r\n  return dates;\r\n};\r\n\r\nexport const getLocaleMonth = (date: Date, locale: string) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    month: \"long\",\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\nexport const getLocalDayOfWeek = (\r\n  date: Date,\r\n  locale: string,\r\n  format?: \"long\" | \"short\" | \"narrow\" | undefined\r\n) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    weekday: format,\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\n/**\r\n * Returns monday of current week\r\n * @param date date for modify\r\n */\r\nconst getMonday = (date: Date) => {\r\n  const day = date.getDay();\r\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n  return new Date(date.setDate(diff));\r\n};\r\n\r\nexport const getWeekNumberISO8601 = (date: Date) => {\r\n  const tmpDate = new Date(date.valueOf());\r\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\r\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\r\n  const firstThursday = tmpDate.valueOf();\r\n  tmpDate.setMonth(0, 1);\r\n  if (tmpDate.getDay() !== 4) {\r\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\r\n  }\r\n  const weekNumber = (\r\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\r\n  ).toString();\r\n\r\n  if (weekNumber.length === 1) {\r\n    return `0${weekNumber}`;\r\n  } else {\r\n    return weekNumber;\r\n  }\r\n};\r\n\r\nexport const getDaysInMonth = (month: number, year: number) => {\r\n  return new Date(year, month + 1, 0).getDate();\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./task-list-header.module.css\";\r\n\r\nexport const TaskListHeaderDefault: React.FC<{\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n}> = ({ headerHeight, fontFamily, fontSize, rowWidth }) => {\r\n  return (\r\n    <div\r\n      className={styles.ganttTable}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      <div\r\n        className={styles.ganttTable_Header}\r\n        style={{\r\n          height: headerHeight - 2,\r\n        }}\r\n      >\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          {/* &nbsp; TASK LIST */}\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.2,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          {/* &nbsp;From */}\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.25,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          {/* &nbsp;To */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","const chipColors: ChipColors = {\r\n  blue: {\r\n    text: \"#518EE0\",\r\n    background: \"#DAF0FB\",\r\n  },\r\n  yellow: {\r\n    text: \"#987901\",\r\n    background: \"#FEEBA3\",\r\n  },\r\n  green: {\r\n    text: \"#2D862D\",\r\n    background: \"#ADE3AC\",\r\n  },\r\n  red: {\r\n    text: \"#f06\",\r\n    background: \"#FEA3C8\",\r\n  },\r\n  purple: {\r\n    text: \"#306\",\r\n    background: \"#B770FE\",\r\n  },\r\n  brown: {\r\n    text: \"#930\",\r\n    background: \"#FE9A70\",\r\n  },\r\n  rose: {\r\n    text: \"#c3c\",\r\n    background: \"#EBADEB\",\r\n  },\r\n  kaki: {\r\n    text: \"#E78336\",\r\n    background: \"#FCEFD4\",\r\n  },\r\n  orange: {\r\n    text: \"#a13b08\",\r\n    background: \"#fb9b72\",\r\n  },\r\n};\r\n\r\nexport const useProvideChipColors = () => {\r\n  const resolveChipColor = (\r\n    badgeColor: string | undefined,\r\n    badgeTitle: string | undefined\r\n  ) =>\r\n    badgeColor\r\n      ? badgeTitle === \"Setup\"\r\n        ? \"#022D5F\"\r\n        : chipColors[badgeColor as keyof ChipColors].background\r\n      : undefined;\r\n\r\n  const resolveChipLabelColor = (\r\n    badgeColor: string | undefined,\r\n    badgeTitle: string | undefined\r\n  ) =>\r\n    badgeColor\r\n      ? badgeTitle === \"Setup\"\r\n        ? \"white\"\r\n        : chipColors[badgeColor as keyof ChipColors].text\r\n      : undefined;\r\n\r\n  return { resolveChipColor, resolveChipLabelColor };\r\n};\r\n\r\ninterface ChipColors {\r\n  blue: Blue;\r\n  yellow: Blue;\r\n  green: Blue;\r\n  red: Blue;\r\n  purple: Blue;\r\n  brown: Blue;\r\n  rose: Blue;\r\n  kaki: Blue;\r\n  orange: Blue;\r\n}\r\n\r\ninterface Blue {\r\n  text: string;\r\n  background: string;\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport styles from \"./task-list-table.module.css\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\";\r\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\r\nimport { useProvideChipColors } from \"./useProvideChipColors\";\r\n\r\nconst localeDateStringCache = {};\r\nconst toLocaleDateStringFactory =\r\n  (locale: string) =>\r\n  (date: Date, dateTimeOptions: Intl.DateTimeFormatOptions) => {\r\n    const key = date.toString();\r\n    let lds = localeDateStringCache[key];\r\n    if (!lds) {\r\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\r\n      localeDateStringCache[key] = lds;\r\n    }\r\n    return lds;\r\n  };\r\n\r\nfunction formatDate(inputDate: string) {\r\n  const dateObject = new Date(inputDate);\r\n  /* const options = { day: '2-digit', month: '2-digit', year: 'numeric' }; */\r\n  return dateObject.toLocaleDateString(\"en-GB\", {\r\n    day: \"2-digit\",\r\n    month: \"2-digit\",\r\n  });\r\n}\r\nconst dateTimeOptions: Intl.DateTimeFormatOptions = {\r\n  weekday: \"short\",\r\n  year: \"numeric\",\r\n  month: \"long\",\r\n  day: \"numeric\",\r\n};\r\n\r\nexport const TaskListTableDefault: React.FC<{\r\n  rowHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  locale: string;\r\n  tasks: Task[];\r\n  selectedTaskId: string;\r\n  setSelectedTask: (taskId: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n}> = ({\r\n  rowHeight,\r\n  rowWidth,\r\n  tasks,\r\n  fontFamily,\r\n  fontSize,\r\n  locale,\r\n  onExpanderClick,\r\n}) => {\r\n  const { resolveChipColor, resolveChipLabelColor } = useProvideChipColors();\r\n  const toLocaleDateString = useMemo(\r\n    () => toLocaleDateStringFactory(locale),\r\n    [locale]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={styles.taskListWrapper}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      {tasks.map(t => {\r\n        let expanderSymbol = null;\r\n        if (t.hideChildren === false) {\r\n          expanderSymbol = <ExpandMoreIcon />;\r\n        } else if (t.hideChildren === true) {\r\n          expanderSymbol = <ChevronRightIcon /> /* \"▶\" */;\r\n        }\r\n\r\n        let match = t && t.id ? t.id.match(/\\d+/) : null;\r\n        let result = match ? match[0] : null;\r\n        let projectId = result ? result : 0;\r\n        return (\r\n          <div\r\n            className={styles.taskListTableRow}\r\n            style={{ height: rowHeight }}\r\n            key={`${t.id}row`}\r\n          >\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: \"305px\",\r\n                maxWidth: rowWidth,\r\n              }}\r\n              title={t.name}\r\n            >\r\n              <div className={styles.taskListNameWrapper}>\r\n                <div\r\n                  className={\r\n                    expanderSymbol\r\n                      ? styles.taskListExpander\r\n                      : styles.taskListEmptyExpander\r\n                  }\r\n                  onClick={() => onExpanderClick(t)}\r\n                >\r\n                  {expanderSymbol}\r\n                </div>\r\n                {t.type === \"project\" ? (\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                    }}\r\n                  >\r\n                    <div\r\n                      style={{\r\n                        fontWeight: \"600\",\r\n                        fontSize: \"14px\",\r\n                        maxHeight: \"30px\",\r\n                        lineHeight: 1,\r\n                        maxWidth: \"350px\",\r\n                        overflow: \"hidden\", // Still needed to respect maxHeight\r\n                        wordWrap: \"break-word\", // Ensures long words break to the next line\r\n                        whiteSpace: \"normal\",\r\n                      }}\r\n                    >\r\n                      {t.name}\r\n                    </div>\r\n                    {t.projectManager === \"Undefined\" ? (\r\n                      <a\r\n                        href={\"/projects/\" + projectId + \"/personel\"}\r\n                        style={{\r\n                          fontSize: \"12px\",\r\n                          color: \"rgb(2, 45, 95)\",\r\n                          cursor: \"pointer\",\r\n                          textDecoration: \"underline\",\r\n                        }}\r\n                      >\r\n                        Assign project manager\r\n                      </a>\r\n                    ) : (\r\n                      <div\r\n                        style={{ fontSize: \"12px\", color: \"rgb(2, 45, 95)\" }}\r\n                      >\r\n                        {t.projectManager}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div\r\n                    style={{\r\n                      background: resolveChipColor(t.color, \"Title chip\"),\r\n                      color: resolveChipLabelColor(t.color, \"Title chip\"),\r\n                      padding: \"0.3rem 1rem\",\r\n                      borderRadius: \"50px\",\r\n                      fontSize: \"12px\",\r\n                      marginLeft: \"14px\",\r\n                    }}\r\n                  >\r\n                    {t.name}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {t.type !== \"project\" && (\r\n              <div\r\n                className={styles.taskListCell}\r\n                style={{\r\n                  minWidth: rowWidth,\r\n                  maxWidth: rowWidth,\r\n                  width: \"67%\",\r\n                  textAlign: \"center\",\r\n                  color: \"#747474\",\r\n                  fontSize: \"12px\",\r\n                }}\r\n              >\r\n                &nbsp;\r\n                {`${formatDate(toLocaleDateString(t.start, dateTimeOptions))\r\n                  .split(\"/\")\r\n                  .join(\".\")} - ${formatDate(\r\n                  toLocaleDateString(t.end, dateTimeOptions)\r\n                )\r\n                  .split(\"/\")\r\n                  .join(\".\")}`}\r\n                {/* &nbsp;{formatDate(toLocaleDateString(t.end, dateTimeOptions))} */}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./vertical-scroll.module.css\";\r\n\r\nexport const VerticalScroll: React.FC<{\r\n  scroll: number;\r\n  ganttHeight: number;\r\n  ganttFullHeight: number;\r\n  headerHeight: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({\r\n  scroll,\r\n  ganttHeight,\r\n  ganttFullHeight,\r\n  headerHeight,\r\n  rtl,\r\n  onScroll,\r\n}) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: ganttHeight,\r\n        marginTop: headerHeight,\r\n        marginLeft: rtl ? \"\" : \"-1rem\",\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ height: ganttFullHeight, width: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nexport type TaskListProps = {\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  rowHeight: number;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  locale: string;\r\n  tasks: Task[];\r\n  taskListRef: React.RefObject<HTMLDivElement>;\r\n  horizontalContainerClass?: string;\r\n  selectedTask: BarTask | undefined;\r\n  setSelectedTask: (task: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n  TaskListHeader: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n};\r\n\r\nexport const TaskList: React.FC<TaskListProps> = ({\r\n  headerHeight,\r\n  fontFamily,\r\n  fontSize,\r\n  rowWidth,\r\n  rowHeight,\r\n  scrollY,\r\n  tasks,\r\n  selectedTask,\r\n  setSelectedTask,\r\n  onExpanderClick,\r\n  locale,\r\n  ganttHeight,\r\n  taskListRef,\r\n  horizontalContainerClass,\r\n  TaskListHeader,\r\n  TaskListTable,\r\n}) => {\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  const headerProps = {\r\n    headerHeight,\r\n    fontFamily,\r\n    fontSize,\r\n    rowWidth,\r\n  };\r\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\r\n  const tableProps = {\r\n    rowHeight,\r\n    rowWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks,\r\n    locale,\r\n    selectedTaskId: selectedTaskId,\r\n    setSelectedTask,\r\n    onExpanderClick,\r\n  };\r\n\r\n  return (\r\n    <div ref={taskListRef}>\r\n      <TaskListHeader {...headerProps} />\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={horizontalContainerClass}\r\n        style={ganttHeight ? { height: ganttHeight } : {}}\r\n      >\r\n        <TaskListTable {...tableProps} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { addToDate } from \"../../helpers/date-helper\";\r\nimport styles from \"./grid.module.css\";\r\n\r\nexport type GridBodyProps = {\r\n  tasks: Task[];\r\n  dates: Date[];\r\n  svgWidth: number;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  todayColor: string;\r\n  rtl: boolean;\r\n};\r\nexport const GridBody: React.FC<GridBodyProps> = ({\r\n  tasks,\r\n  dates,\r\n  rowHeight,\r\n  svgWidth,\r\n  columnWidth,\r\n  todayColor,\r\n  rtl,\r\n}) => {\r\n  let y = 0;\r\n  const gridRows: ReactChild[] = [];\r\n  const rowLines: ReactChild[] = [\r\n    <line\r\n      key=\"RowLineFirst\"\r\n      x=\"0\"\r\n      y1={0}\r\n      x2={svgWidth}\r\n      y2={0}\r\n      className={styles.gridRowLine}\r\n    />,\r\n  ];\r\n  for (const task of tasks) {\r\n    gridRows.push(\r\n      <rect\r\n        key={\"Row\" + task.id}\r\n        x=\"0\"\r\n        y={y}\r\n        width={svgWidth}\r\n        height={rowHeight}\r\n        className={styles.gridRow}\r\n      />\r\n    );\r\n    rowLines.push(\r\n      <line\r\n        key={\"RowLine\" + task.id}\r\n        x=\"0\"\r\n        y1={y + rowHeight}\r\n        x2={svgWidth}\r\n        y2={y + rowHeight}\r\n        className={styles.gridRowLine}\r\n      />\r\n    );\r\n    y += rowHeight;\r\n  }\r\n\r\n  const now = new Date();\r\n  let tickX = 0;\r\n  const ticks: ReactChild[] = [];\r\n  let today: ReactChild = <rect />;\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    ticks.push(\r\n      <line\r\n        key={date.getTime()}\r\n        x1={tickX}\r\n        y1={0}\r\n        x2={tickX}\r\n        y2={y}\r\n        className={styles.gridTick}\r\n      />\r\n    );\r\n    if (\r\n      (i + 1 !== dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        dates[i + 1].getTime() >= now.getTime()) ||\r\n      // if current date is last\r\n      (i !== 0 &&\r\n        i + 1 === dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        addToDate(\r\n          date,\r\n          date.getTime() - dates[i - 1].getTime(),\r\n          \"millisecond\"\r\n        ).getTime() >= now.getTime())\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    // rtl for today\r\n    if (\r\n      rtl &&\r\n      i + 1 !== dates.length &&\r\n      date.getTime() >= now.getTime() &&\r\n      dates[i + 1].getTime() < now.getTime()\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX + columnWidth}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    tickX += columnWidth;\r\n  }\r\n  return (\r\n    <g className=\"gridBody\">\r\n      <g className=\"rows\">{gridRows}</g>\r\n      <g className=\"rowLines\">{rowLines}</g>\r\n      <g className=\"ticks\">{ticks}</g>\r\n      <g className=\"today\">{today}</g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { GridBody, GridBodyProps } from \"./grid-body\";\r\n\r\nexport type GridProps = GridBodyProps;\r\nexport const Grid: React.FC<GridProps> = props => {\r\n  return (\r\n    <g className=\"grid\">\r\n      <GridBody {...props} />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\ntype TopPartOfCalendarProps = {\r\n  value: string;\r\n  x1Line: number;\r\n  y1Line: number;\r\n  y2Line: number;\r\n  xText: number;\r\n  yText: number;\r\n};\r\n\r\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\r\n  value,\r\n  x1Line,\r\n  y1Line,\r\n  y2Line,\r\n  xText,\r\n  yText,\r\n}) => {\r\n  return (\r\n    <g className=\"calendarTop\">\r\n      <line\r\n        x1={x1Line}\r\n        y1={y1Line}\r\n        x2={x1Line}\r\n        y2={y2Line}\r\n        className={styles.calendarTopTick}\r\n        key={value + \"line\"}\r\n      />\r\n      <text\r\n        key={value + \"text\"}\r\n        y={yText}\r\n        x={xText}\r\n        className={styles.calendarTopText}\r\n      >\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\r\nimport {\r\n  getCachedDateTimeFormat,\r\n  getDaysInMonth,\r\n  getLocalDayOfWeek,\r\n  getLocaleMonth,\r\n  getWeekNumberISO8601,\r\n} from \"../../helpers/date-helper\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\nexport type CalendarProps = {\r\n  dateSetup: DateSetup;\r\n  locale: string;\r\n  viewMode: ViewMode;\r\n  rtl: boolean;\r\n  headerHeight: number;\r\n  columnWidth: number;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n};\r\n\r\nexport const Calendar: React.FC<CalendarProps> = ({\r\n  dateSetup,\r\n  locale,\r\n  viewMode,\r\n  rtl,\r\n  headerHeight,\r\n  columnWidth,\r\n  fontFamily,\r\n  fontSize,\r\n}) => {\r\n  const getCalendarValuesForYear = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = date.getFullYear();\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getFullYear()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getFullYear()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={headerHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  function getWeekNumber(d: Date): number {\r\n    // Copy date so don't modify original\r\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\r\n    // Set to nearest Thursday: current date + 4 - current day number\r\n    // Make Sunday's day number 7\r\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\r\n    // Get first day of year\r\n    var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    // Calculate full weeks to nearest Thursday\r\n    var weekNo = Math.ceil(\r\n      ((d.getTime() - yearStart.getTime()) / 86400000 + 1) / 7\r\n    );\r\n    // Return array of year and week number\r\n    return weekNo;\r\n  }\r\n\r\n  const getCalendarValuesForMonth = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = getLocaleMonth(date, locale);\r\n      bottomValues.push(\r\n        <text\r\n          key={bottomValue + date.getFullYear()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForWeek = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    let weeksCount: number = 1;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = dates.length - 1; i >= 0; i--) {\r\n      const date = dates[i];\r\n      let topValue = \"\";\r\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\r\n        // top\r\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\r\n      }\r\n      // bottom\r\n      const bottomValue = `WH ${getWeekNumberISO8601(date)}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n\r\n      if (topValue) {\r\n        // if last day is new month\r\n        if (i !== dates.length - 1) {\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i + weeksCount * columnWidth}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n        weeksCount = 0;\r\n      }\r\n      weeksCount++;\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForDay = () => {\r\n    const topValues = [];\r\n    const bottomValues = [];\r\n    const middleValues = [];\r\n\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const weekNumber = getWeekNumber(date);\r\n      const middleValue = `WH ${weekNumber}`;\r\n      /* const bottomValue = `${getLocalDayOfWeek(date, locale, \"short\")}, ${date\r\n        .getDate()\r\n        .toString()}`; */\r\n\r\n      if (date.getDay() === 1) {\r\n        middleValues.push(\r\n          <text\r\n            key={date.getTime() + \"middle\"}\r\n            y={headerHeight * 0.65} // Adjust the y value as needed\r\n            x={columnWidth * i + columnWidth * 0.55}\r\n            className={styles.calendarMiddleText} // Add a new style for the middle text\r\n          >\r\n            {middleValue}\r\n          </text>\r\n        );\r\n      }\r\n\r\n      const bottomValue = date.toLocaleDateString(locale, {\r\n        day: \"2-digit\",\r\n        month: \"2-digit\",\r\n      });\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.9}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue.split(\"/\").join(\".\")}\r\n          {/* added split join */}\r\n        </text>\r\n      );\r\n      if (\r\n        i + 1 !== dates.length &&\r\n        date.getMonth() !== dates[i + 1].getMonth()\r\n      ) {\r\n        const topValue = `${getLocaleMonth(\r\n          date,\r\n          locale\r\n        ).toUpperCase()}, ${date.getFullYear()}`;\r\n\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * (i + 1)}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={\r\n              columnWidth * (i + 1) -\r\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\r\n                columnWidth *\r\n                0.5\r\n            }\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues, middleValues];\r\n  };\r\n\r\n  const getCalendarValuesForPartOfDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n        const topValue = `${getLocalDayOfWeek(\r\n          date,\r\n          locale,\r\n          \"short\"\r\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i + ticks * columnWidth}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForHour = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\r\n        const displayDate = dates[i - 1];\r\n        const topValue = `${getLocalDayOfWeek(\r\n          displayDate,\r\n          locale,\r\n          \"long\"\r\n        )}, ${displayDate.getDate()} ${getLocaleMonth(displayDate, locale)}`;\r\n        const topPosition = (date.getHours() - 24) / 2;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + displayDate.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * (i + topPosition)}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  let topValues: ReactChild[] = [];\r\n  let bottomValues: ReactChild[] = [];\r\n  let middleValues: ReactChild[] = [];\r\n  switch (dateSetup.viewMode) {\r\n    case ViewMode.Year:\r\n      [topValues, bottomValues] = getCalendarValuesForYear();\r\n      break;\r\n    case ViewMode.Month:\r\n      [topValues, bottomValues] = getCalendarValuesForMonth();\r\n      break;\r\n    case ViewMode.Week:\r\n      [topValues, bottomValues] = getCalendarValuesForWeek();\r\n      break;\r\n    case ViewMode.Day:\r\n      [topValues, bottomValues, middleValues] = getCalendarValuesForDay();\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n    case ViewMode.HalfDay:\r\n      [topValues, bottomValues] = getCalendarValuesForPartOfDay();\r\n      break;\r\n    case ViewMode.Hour:\r\n      [topValues, bottomValues] = getCalendarValuesForHour();\r\n  }\r\n  return (\r\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\r\n      <rect\r\n        x={0}\r\n        y={0}\r\n        width={columnWidth * dateSetup.dates.length}\r\n        height={headerHeight}\r\n        className={styles.calendarHeader}\r\n      />\r\n      {bottomValues} {middleValues} {topValues}\r\n    </g>\r\n  );\r\n};\r\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\ntype ArrowProps = {\r\n  taskFrom: BarTask;\r\n  taskTo: BarTask;\r\n  rowHeight: number;\r\n  taskHeight: number;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n};\r\nexport const Arrow: React.FC<ArrowProps> = ({\r\n  taskFrom,\r\n  taskTo,\r\n  rowHeight,\r\n  taskHeight,\r\n  arrowIndent,\r\n  rtl,\r\n}) => {\r\n  let path: string;\r\n  let trianglePoints: string;\r\n  if (rtl) {\r\n    [path, trianglePoints] = drownPathAndTriangleRTL(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  } else {\r\n    [path, trianglePoints] = drownPathAndTriangle(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  }\r\n\r\n  return (\r\n    <g className=\"arrow\">\r\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\r\n      <polygon points={trianglePoints} />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst drownPathAndTriangle = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x1\r\n      ? arrowIndent\r\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \r\n  h ${arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \r\n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \r\n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n\r\nconst drownPathAndTriangleRTL = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x2\r\n      ? -arrowIndent\r\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \r\n  h ${-arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \r\n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \r\n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n","import React from \"react\";\r\n\r\nimport styles from \"./relation-line.module.css\";\r\n\r\ntype RelationLineProps = {\r\n  x1: number;\r\n  x2: number;\r\n  y1: number;\r\n  y2: number;\r\n};\r\n\r\nexport const RelationLine: React.FC<RelationLineProps> = ({\r\n  x1,\r\n  x2,\r\n  y1,\r\n  y2,\r\n}) => {\r\n  return (\r\n    <line x1={x1} x2={x2} y1={y1} y2={y2} className={styles.relationLine} />\r\n  );\r\n};\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { RelationMoveTarget } from \"../types/gantt-task-actions\";\r\n\r\nexport const getRelationCircleByCoordinates = (\r\n  svgP: DOMPoint,\r\n  tasks: BarTask[],\r\n  taskHalfHeight: number,\r\n  relationCircleOffset: number,\r\n  relationCircleRadius: number,\r\n  rtl: boolean\r\n): [BarTask, RelationMoveTarget] | null => {\r\n  const { x, y } = svgP;\r\n\r\n  for (let i = 0, l = tasks.length; i < l; ++i) {\r\n    const task = tasks[i];\r\n\r\n    if (\r\n      y >= task.y + taskHalfHeight - relationCircleRadius &&\r\n      y <= task.y + taskHalfHeight + relationCircleRadius\r\n    ) {\r\n      if (\r\n        x >= task.x1 - relationCircleOffset - relationCircleRadius &&\r\n        y <= task.x1 - relationCircleOffset + relationCircleRadius\r\n      ) {\r\n        return [task, rtl ? \"endOfTask\" : \"startOfTask\"];\r\n      }\r\n\r\n      if (\r\n        x >= task.x2 + relationCircleOffset - relationCircleRadius &&\r\n        y <= task.x2 + relationCircleOffset + relationCircleRadius\r\n      ) {\r\n        return [task, rtl ? \"startOfTask\" : \"endOfTask\"];\r\n      }\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n","import { Task } from \"../types/public-types\";\r\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\r\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\r\n\r\nexport const convertToBarTasks = (\r\n  tasks: Task[],\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n) => {\r\n  let barTasks = tasks.map((t, i) => {\r\n    return convertToBarTask(\r\n      t,\r\n      i,\r\n      dates,\r\n      columnWidth,\r\n      rowHeight,\r\n      taskHeight,\r\n      barCornerRadius,\r\n      handleWidth,\r\n      rtl,\r\n      barProgressColor,\r\n      barProgressSelectedColor,\r\n      barBackgroundColor,\r\n      barBackgroundSelectedColor,\r\n      projectProgressColor,\r\n      projectProgressSelectedColor,\r\n      projectBackgroundColor,\r\n      projectBackgroundSelectedColor,\r\n      milestoneBackgroundColor,\r\n      milestoneBackgroundSelectedColor\r\n    );\r\n  });\r\n  console.log(\"BARTASKS\", barTasks);\r\n  // set dependencies\r\n  barTasks = barTasks.map(task => {\r\n    const dependencies = task.dependencies || [];\r\n    for (let j = 0; j < dependencies.length; j++) {\r\n      const dependence = barTasks.findIndex(\r\n        value => value.id === dependencies[j]\r\n      );\r\n      if (dependence !== -1) {\r\n        barTasks[dependence].barChildren.push(task);\r\n\r\n        task.offset = task.x1 - barTasks[1].x1;\r\n      } else {\r\n        task.offset = 0;\r\n      }\r\n    }\r\n    return task;\r\n  });\r\n\r\n  return barTasks;\r\n};\r\n\r\nconst convertToBarTask = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let barTask: BarTask;\r\n  switch (task.type) {\r\n    case \"milestone\":\r\n      barTask = convertToMilestone(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      );\r\n      break;\r\n    case \"project\":\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor\r\n      );\r\n      break;\r\n    default:\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor\r\n      );\r\n      break;\r\n  }\r\n  return barTask;\r\n};\r\n\r\nconst convertToBar = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let x1: number;\r\n  let x2: number;\r\n  if (rtl) {\r\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\r\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\r\n  } else {\r\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\r\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\r\n  }\r\n  let typeInternal: TaskTypeInternal = task.type;\r\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\r\n    typeInternal = \"smalltask\";\r\n    x2 = x1 + handleWidth * 2;\r\n  }\r\n\r\n  const [progressWidth, progressX] = progressWithByParams(\r\n    x1,\r\n    x2,\r\n    task.progress,\r\n    rtl\r\n  );\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\r\n\r\n  const styles = {\r\n    backgroundColor: barBackgroundColor,\r\n    backgroundSelectedColor: barBackgroundSelectedColor,\r\n    progressColor: barProgressColor,\r\n    progressSelectedColor: barProgressSelectedColor,\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    typeInternal,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX,\r\n    progressWidth,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    hideChildren,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst convertToMilestone = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  const x = taskXCoordinate(task.start, dates, columnWidth);\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const x1 = x - taskHeight * 0.5;\r\n  const x2 = x + taskHeight * 0.5;\r\n\r\n  const rotatedHeight = taskHeight / 1.414;\r\n  const styles = {\r\n    backgroundColor: milestoneBackgroundColor,\r\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\r\n    progressColor: \"\",\r\n    progressSelectedColor: \"\",\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    end: task.start,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX: 0,\r\n    progressWidth: 0,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    typeInternal: task.type,\r\n    progress: 0,\r\n    height: rotatedHeight,\r\n    hideChildren: undefined,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst taskXCoordinate = (xDate: Date, dates: Date[], columnWidth: number) => {\r\n  const index = dates.findIndex(d => d.getTime() >= xDate.getTime()) - 1;\r\n\r\n  const remainderMillis = xDate.getTime() - dates[index].getTime();\r\n  const percentOfInterval =\r\n    remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\r\n  const x = index * columnWidth + percentOfInterval * columnWidth;\r\n  return x;\r\n};\r\nconst taskXCoordinateRTL = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  columnWidth: number\r\n) => {\r\n  let x = taskXCoordinate(xDate, dates, columnWidth);\r\n  x += columnWidth;\r\n  return x;\r\n};\r\nconst taskYCoordinate = (\r\n  index: number,\r\n  rowHeight: number,\r\n  taskHeight: number\r\n) => {\r\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\r\n  return y;\r\n};\r\n\r\nexport const progressWithByParams = (\r\n  taskX1: number,\r\n  taskX2: number,\r\n  progress: number,\r\n  rtl: boolean\r\n) => {\r\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\r\n  let progressX: number;\r\n  if (rtl) {\r\n    progressX = taskX2 - progressWidth;\r\n  } else {\r\n    progressX = taskX1;\r\n  }\r\n  return [progressWidth, progressX];\r\n};\r\n\r\nexport const progressByProgressWidth = (\r\n  progressWidth: number,\r\n  barTask: BarTask\r\n) => {\r\n  const barWidth = barTask.x2 - barTask.x1;\r\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\r\n  if (progressPercent >= 100) return 100;\r\n  else if (progressPercent <= 0) return 0;\r\n  else return progressPercent;\r\n};\r\n\r\nconst progressByX = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 100;\r\n  else if (x <= task.x1) return 0;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\nconst progressByXRTL = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 0;\r\n  else if (x <= task.x1) return 100;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nexport const getProgressPoint = (\r\n  progressX: number,\r\n  taskY: number,\r\n  taskHeight: number\r\n) => {\r\n  const point = [\r\n    progressX - 5,\r\n    taskY + taskHeight,\r\n    progressX + 5,\r\n    taskY + taskHeight,\r\n    progressX,\r\n    taskY + taskHeight - 8.66,\r\n  ];\r\n  return point.join(\",\");\r\n};\r\n\r\nconst startByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x >= task.x2 - task.handleWidth * 2) {\r\n    x = task.x2 - task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x1 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst endByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x <= task.x1 + task.handleWidth * 2) {\r\n    x = task.x1 + task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x2) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x2 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst moveByX = (\r\n  x: number,\r\n  xStep: number,\r\n  task: BarTask,\r\n  prevTask: BarTask | undefined\r\n) => {\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  let newX1 = task.x1 + additionalXValue;\r\n  newX1 = prevTask ? (newX1 < prevTask.x2 ? prevTask.x2 : newX1) : newX1;\r\n  const newX2 = newX1 + task.x2 - task.x1;\r\n  //console.log(\"TASK MOVEX\", task.id, newX1, newX2);\r\n  return [newX1, newX2];\r\n};\r\n\r\nconst moveByXForEach = (\r\n  task: BarTask,\r\n  newMoveX1: number,\r\n  selectedTask: BarTask\r\n) => {\r\n  const taskOffset = task.offset || 0;\r\n  const selectedTaskOffset = selectedTask.offset || 0;\r\n  const newTaskOffset = taskOffset - selectedTaskOffset;\r\n\r\n  const newX1Test = newMoveX1 + newTaskOffset;\r\n  const newX2Test = newX1Test + task.x2 - task.x1;\r\n\r\n  return { newX1Test, newX2Test };\r\n};\r\n\r\nconst dateByX = (\r\n  x: number,\r\n  taskX: number,\r\n  taskDate: Date,\r\n  xStep: number,\r\n  timeStep: number\r\n) => {\r\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\r\n  newDate = new Date(\r\n    newDate.getTime() +\r\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\r\n  );\r\n  return newDate;\r\n};\r\n\r\n/**\r\n * Method handles event in real time(mousemove) and on finish(mouseup)\r\n */\r\nexport const handleTaskBySVGMouseEvent = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  tasks: BarTask[],\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask; changedTasks: BarTask[] } => {\r\n  let result: {\r\n    isChanged: boolean;\r\n    changedTask: BarTask;\r\n    changedTasks: BarTask[];\r\n  };\r\n  switch (selectedTask.type) {\r\n    case \"milestone\":\r\n      result = handleTaskBySVGMouseEventForMilestone(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        tasks,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n    default:\r\n      console.log(\"MOVING\");\r\n\r\n      result = handleTaskBySVGMouseEventForBar(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        tasks,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForBar = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  tasks: BarTask[],\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask; changedTasks: BarTask[] } => {\r\n  const changedTasks: BarTask[] = [];\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  //getAllBarChildrens\r\n\r\n  switch (action) {\r\n    case \"progress\":\r\n      if (rtl) {\r\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\r\n      } else {\r\n        changedTask.progress = progressByX(svgX, selectedTask);\r\n      }\r\n      isChanged = changedTask.progress !== selectedTask.progress;\r\n      if (isChanged) {\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    case \"start\": {\r\n      const newX1 = startByX(svgX, xStep, selectedTask);\r\n      changedTask.x1 = newX1;\r\n      isChanged = changedTask.x1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.end = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.start = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"end\": {\r\n      const newX2 = endByX(svgX, xStep, selectedTask);\r\n      changedTask.x2 = newX2;\r\n      isChanged = changedTask.x2 !== selectedTask.x2;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.start = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.end = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"move\": {\r\n      //GET ARRAY OF DEPENDENT TASKS AND POP LAST ITEM TO SET MIN DATE RESTRICTION!\r\n      const prevDependentTask = tasks\r\n        .filter(item => selectedTask.dependencies?.includes(item.id))\r\n        .pop();\r\n\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask,\r\n        prevDependentTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        console.log(\"IZVODI SE\");\r\n\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = dateByX(\r\n          newMoveX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n\r\n        //changedTask.offset = changedTask.x1 - tasks[1].x1;\r\n\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n        console.log(\"IZVODI SE\", changedTask);\r\n        //if (changedTask.barChildren.length === 0)\r\n        //return { isChanged, changedTask, changedTasks };\r\n\r\n        const childrenIds = getAllBarChildrenIds(changedTask);\r\n        //const copyTasks = tasks;\r\n        tasks\r\n          .filter(t => childrenIds.includes(t.id))\r\n          .map(task => {\r\n            const { newX1Test, newX2Test } = moveByXForEach(\r\n              task,\r\n              newMoveX1,\r\n              selectedTask\r\n            );\r\n            task.start = dateByX(\r\n              newX1Test,\r\n              task.x1,\r\n              task.start,\r\n              xStep,\r\n              timeStep\r\n            );\r\n            task.end = dateByX(newX2Test, task.x2, task.end, xStep, timeStep);\r\n            //selectedTask.offset = selectedTask.x1 - tasks[1].x1;\r\n            task.x1 = newX1Test;\r\n            task.x2 = newX2Test;\r\n\r\n            const [progressWidth, progressX] = progressWithByParams(\r\n              task.x1,\r\n              task.x2,\r\n              task.progress,\r\n              rtl\r\n            );\r\n            task.progressWidth = progressWidth;\r\n            task.progressX = progressX;\r\n            changedTasks.push(task);\r\n            return task;\r\n          });\r\n\r\n        /* tasks\r\n          .filter(task => selectedTask.id === task.id)\r\n          .map(\r\n            task =>\r\n              (task.offset =\r\n                selectedTask.offset || 0 + newMoveX1 - selectedTask.x1)\r\n          ); */\r\n      }\r\n      //break;\r\n    }\r\n  }\r\n  /*   console.log(\"CHANGED TASKS\", {\r\n    isChanged,\r\n    changedTask: changedTask || selectedTask,\r\n    changedTasks,\r\n  }); */\r\n  console.log(\"CODE 1\", changedTasks);\r\n  return { isChanged, changedTask: changedTask, changedTasks };\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForMilestone = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  tasks: BarTask[],\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask; changedTasks: BarTask[] } => {\r\n  const changedTasks: BarTask[] = [];\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"move\": {\r\n      //fix\r\n      const prevTaskIndex =\r\n        tasks.findIndex(task => task.id === selectedTask.id) - 1;\r\n      const prevTask = tasks[prevTaskIndex];\r\n\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask,\r\n        prevTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = changedTask.start;\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask, changedTasks };\r\n};\r\n\r\nfunction getAllBarChildrenIds(obj: BarTask) {\r\n  let ids: string[] = [];\r\n  if (!ids.includes(obj.id)) {\r\n    ids.push(obj.id);\r\n  }\r\n\r\n  if (obj.barChildren && obj.barChildren.length > 0) {\r\n    for (const child of obj.barChildren) {\r\n      if (!ids.includes(child.id)) {\r\n        ids.push(child.id);\r\n      }\r\n      ids = ids.concat(getAllBarChildrenIds(child));\r\n    }\r\n  }\r\n  return ids;\r\n}\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { Task } from \"../types/public-types\";\r\n\r\nexport function isKeyboardEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.KeyboardEvent {\r\n  return (event as React.KeyboardEvent).key !== undefined;\r\n}\r\n\r\nexport function isMouseEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.MouseEvent {\r\n  return (event as React.MouseEvent).clientX !== undefined;\r\n}\r\n\r\nexport function isBarTask(task: Task | BarTask): task is BarTask {\r\n  return (task as BarTask).x1 !== undefined;\r\n}\r\n\r\nexport function removeHiddenTasks(tasks: Task[]) {\r\n  const groupedTasks = tasks.filter(\r\n    t => t.hideChildren && t.type === \"project\"\r\n  );\r\n  if (groupedTasks.length > 0) {\r\n    for (let i = 0; groupedTasks.length > i; i++) {\r\n      const groupedTask = groupedTasks[i];\r\n      const children = getChildren(tasks, groupedTask);\r\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\r\n    }\r\n  }\r\n  return tasks;\r\n}\r\n\r\nfunction getChildren(taskList: Task[], task: Task) {\r\n  let tasks: Task[] = [];\r\n  if (task.type !== \"project\") {\r\n    tasks = taskList.filter(\r\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\r\n    );\r\n  } else {\r\n    tasks = taskList.filter(t => t.project && t.project === task.id);\r\n  }\r\n  var taskChildren: Task[] = [];\r\n  tasks.forEach(t => {\r\n    taskChildren.push(...getChildren(taskList, t));\r\n  })\r\n  tasks = tasks.concat(tasks, taskChildren);\r\n  return tasks;\r\n}\r\n\r\nexport const sortTasks = (taskA: Task, taskB: Task) => {\r\n  const orderA = taskA.displayOrder || Number.MAX_VALUE;\r\n  const orderB = taskB.displayOrder || Number.MAX_VALUE;\r\n  if (orderA > orderB) {\r\n    return 1;\r\n  } else if (orderA < orderB) {\r\n    return -1;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  /* progress start point */\r\n  progressX: number;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  isSelected,\r\n  progressX,\r\n  progressWidth,\r\n  barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n}) => {\r\n  /*   const progressLinesBackground = {\r\n    backgroundImage:\r\n      \"linear-gradient(-45deg, rgba(255, 255, 255, 0.125) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.125) 50%, rgba(255, 255, 255, 0.125) 75%, transparent 75%, transparent)\",\r\n  }; */\r\n\r\n  /*   const getProcessColor = () => {\r\n    return isSelected ? progressLinesBackground : progressLinesBackground;\r\n  };\r\n */\r\n  /*   const getBarColor = () => {\r\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\r\n  };\r\n */\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={styles.backgroundSelectedColor}\r\n        className={style.barBackground}\r\n      />\r\n      <rect\r\n        x={progressX}\r\n        width={progressWidth}\r\n        y={y + 0.2}\r\n        height={height - 0.5}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={isSelected ? styles.backgroundColor : styles.backgroundColor}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarDateHandleProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  barCornerRadius: number;\r\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\r\n};\r\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  barCornerRadius,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <rect\r\n      x={x}\r\n      y={y}\r\n      width={width}\r\n      height={height}\r\n      className={styles.barHandle}\r\n      ry={barCornerRadius}\r\n      rx={barCornerRadius}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport styles from \"./bar-relation-handle.module.css\";\r\n\r\ntype BarRelationHandleProps = {\r\n  x: number;\r\n  y: number;\r\n  radius: number;\r\n  isRelationDrawMode: boolean;\r\n  onMouseDown: (event: React.MouseEvent<SVGCircleElement, MouseEvent>) => void;\r\n};\r\nexport const BarRelationHandle: React.FC<BarRelationHandleProps> = ({\r\n  x,\r\n  y,\r\n  radius,\r\n  isRelationDrawMode,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <circle\r\n      cx={x}\r\n      cy={y}\r\n      r={radius}\r\n      className={cx(styles.barRelationHandle, {\r\n        [styles.barRelationHandle_drawMode]: isRelationDrawMode,\r\n      })}\r\n      onMouseDown={onMouseDown}\r\n      data-draw-mode={isRelationDrawMode}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarProgressHandleProps = {\r\n  progressPoint: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\r\n  progressPoint,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <polygon\r\n      className={styles.barHandle}\r\n      points={progressPoint}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","export const projectColors = {\r\n  red: {\r\n    bg: \"#E52713\",\r\n    fg: \"#F5A9A1\",\r\n  },\r\n  green: {\r\n    bg: \"#2D862D\",\r\n    fg: \"#ADE3AC\",\r\n  },\r\n  yellow: {\r\n    bg: \"#F2C94C\",\r\n    fg: \"#FAE9B7\",\r\n  },\r\n};\r\n","import React, { useCallback } from \"react\";\r\n\r\nimport cx from \"classnames\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarDateHandle } from \"./bar-date-handle\";\r\nimport { BarRelationHandle } from \"./bar-relation-handle\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\nimport { useProvideChipColors } from \"../../task-list/useProvideChipColors\";\r\nimport {\r\n  Tooltip,\r\n  tooltipClasses,\r\n  TooltipProps,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport stylesRelationHandle from \"./bar-relation-handle.module.css\";\r\nimport { projectColors } from \"../../../helpers/resolve-project-color\";\r\n\r\nexport const HtmlTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(() => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    color: \"#666\",\r\n    background: \"#fff\",\r\n    padding: \"1rem\",\r\n    borderRadius: \"1rem\",\r\n    boxShadow: \"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)\",\r\n  },\r\n}));\r\n\r\nexport const Bar: React.FC<TaskItemProps> = ({\r\n  task,\r\n  taskHalfHeight,\r\n  relationCircleOffset,\r\n  relationCircleRadius,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  isRelationChangeable,\r\n  isRelationDrawMode,\r\n  rtl,\r\n  onEventStart,\r\n  onRelationStart,\r\n  isSelected,\r\n}) => {\r\n  const x = false;\r\n\r\n  const { resolveChipColor, resolveChipLabelColor } = useProvideChipColors();\r\n\r\n  const onLeftRelationTriggerMouseDown = useCallback(() => {\r\n    onRelationStart(rtl ? \"endOfTask\" : \"startOfTask\", task);\r\n  }, [onRelationStart, rtl, task]);\r\n\r\n  const onRightRelationTriggerMouseDown = useCallback(() => {\r\n    onRelationStart(rtl ? \"startOfTask\" : \"endOfTask\", task);\r\n  }, [onRelationStart, rtl, task]);\r\n\r\n  const progressPoint = getProgressPoint(\r\n    +!rtl * task.progressWidth + task.progressX,\r\n    task.y,\r\n    task.height\r\n  );\r\n  const handleHeight = task.height - 2;\r\n  const taskStyle = {\r\n    ...task.styles,\r\n    backgroundColor: projectColors[task.progressColor].bg || \"#ededed\",\r\n    backgroundSelectedColor: projectColors[task.progressColor].fg || \"#ededed\",\r\n  };\r\n  return (\r\n    <HtmlTooltip\r\n      placement=\"bottom-start\"\r\n      followCursor\r\n      title={\r\n        <React.Fragment>\r\n          <Typography\r\n            style={{\r\n              textAlign: \"center\",\r\n              fontSize: \"14px\",\r\n              borderRadius: \"50px\",\r\n              background: resolveChipColor(task.color, \"Title chip\"),\r\n              color: resolveChipLabelColor(task.color, \"Title chip\"),\r\n              padding: \"0.3rem 1rem\",\r\n            }}\r\n          >\r\n            <div style={{ margin: \"auto\" }}>{task.name}</div>\r\n          </Typography>\r\n          <pre\r\n            className={styles.tooltipDefaultContainerParagraph}\r\n          >{`${task.start.getDate()}.${\r\n            task.start.getMonth() + 1\r\n          }.${task.start.getFullYear()} - ${task.end.getDate()}.${\r\n            task.end.getMonth() + 1\r\n          }.${task.end.getFullYear()}`}</pre>\r\n          {task.end.getTime() - task.start.getTime() !== 0 && (\r\n            <p\r\n              className={styles.tooltipDefaultContainerParagraph}\r\n            >{`Duration: ${~~(\r\n              (task.end.getTime() - task.start.getTime()) /\r\n              (1000 * 60 * 60 * 24)\r\n            )} day(s)`}</p>\r\n          )}\r\n\r\n          <p className={styles.tooltipDefaultContainerParagraph}>\r\n            {!!task.progress && `Progress: ${task.progress} %`}\r\n          </p>\r\n        </React.Fragment>\r\n      }\r\n    >\r\n      <g\r\n        className={cx(\r\n          styles.barWrapper,\r\n          stylesRelationHandle.barRelationHandleWrapper\r\n        )}\r\n        tabIndex={0}\r\n      >\r\n        <BarDisplay\r\n          x={task.x1}\r\n          y={task.y + 2}\r\n          width={task.x2 - task.x1}\r\n          height={15}\r\n          progressX={task.progressX}\r\n          progressWidth={task.progressWidth} //HARDCODED TO FULL COLOR THE TASK BAR\r\n          barCornerRadius={task.barCornerRadius}\r\n          styles={taskStyle}\r\n          isSelected={isSelected}\r\n          onMouseDown={e => {\r\n            isDateChangeable && onEventStart(\"move\", task, e);\r\n          }}\r\n        />\r\n        <g className=\"handleGroup\">\r\n          {isDateChangeable && (\r\n            <g>\r\n              {/* left */}\r\n              <BarDateHandle\r\n                x={task.x1 + 1}\r\n                y={task.y + 1}\r\n                width={task.handleWidth}\r\n                height={handleHeight}\r\n                barCornerRadius={task.barCornerRadius}\r\n                onMouseDown={e => {\r\n                  onEventStart(\"start\", task, e);\r\n                }}\r\n              />\r\n              {/* right */}\r\n              <BarDateHandle\r\n                x={task.x2 - task.handleWidth - 1}\r\n                y={task.y + 1}\r\n                width={task.handleWidth}\r\n                height={handleHeight}\r\n                barCornerRadius={task.barCornerRadius}\r\n                onMouseDown={e => {\r\n                  onEventStart(\"end\", task, e);\r\n                }}\r\n              />\r\n            </g>\r\n          )}\r\n          {isRelationChangeable && (\r\n            <g>\r\n              {/* left */}\r\n              <BarRelationHandle\r\n                isRelationDrawMode={isRelationDrawMode}\r\n                x={task.x1 - relationCircleOffset}\r\n                y={task.y + taskHalfHeight}\r\n                radius={relationCircleRadius}\r\n                onMouseDown={onLeftRelationTriggerMouseDown}\r\n              />\r\n              {/* right */}\r\n              <BarRelationHandle\r\n                isRelationDrawMode={isRelationDrawMode}\r\n                x={task.x2 + relationCircleOffset}\r\n                y={task.y + taskHalfHeight}\r\n                radius={relationCircleRadius}\r\n                onMouseDown={onRightRelationTriggerMouseDown}\r\n              />\r\n            </g>\r\n          )}\r\n          {isProgressChangeable && x && (\r\n            <BarProgressHandle\r\n              progressPoint={progressPoint}\r\n              onMouseDown={e => {\r\n                onEventStart(\"progress\", task, e);\r\n              }}\r\n            />\r\n          )}\r\n        </g>\r\n      </g>\r\n    </HtmlTooltip>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport { BarRelationHandle } from \"../bar/bar-relation-handle\";\r\nimport stylesRelationHandle from \"../bar/bar-relation-handle.module.css\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./milestone.module.css\";\r\nimport { useProvideChipColors } from \"../../task-list/useProvideChipColors\";\r\n\r\nexport const Milestone: React.FC<TaskItemProps> = ({\r\n  task,\r\n  taskHalfHeight,\r\n  relationCircleOffset,\r\n  relationCircleRadius,\r\n  isDateChangeable,\r\n  isRelationChangeable,\r\n  isRelationDrawMode,\r\n  onEventStart,\r\n  onRelationStart,\r\n  isSelected,\r\n}) => {\r\n  const { resolveChipColor, resolveChipLabelColor } = useProvideChipColors();\r\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \r\n    ${task.y + task.height * 0.85})`;\r\n  const getBarColor = () => {\r\n    return isSelected\r\n      ? resolveChipColor(task.color, \"test\") || \"#ededed\"\r\n      : resolveChipLabelColor(task.color, \"test\") || \"#ededed\";\r\n  };\r\n\r\n  return (\r\n    <g\r\n      tabIndex={0}\r\n      className={cx(\r\n        styles.milestoneWrapper,\r\n        stylesRelationHandle.barRelationHandleWrapper\r\n      )}\r\n    >\r\n      <rect\r\n        fill={getBarColor()}\r\n        x={task.x1}\r\n        width={task.height}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        transform={transform}\r\n        className={styles.milestoneBackground}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n\r\n      <g className=\"handleGroup\">\r\n        {isRelationChangeable && (\r\n          <g>\r\n            {/* left */}\r\n            <BarRelationHandle\r\n              isRelationDrawMode={isRelationDrawMode}\r\n              x={task.x1 - relationCircleOffset}\r\n              y={task.y + taskHalfHeight}\r\n              radius={relationCircleRadius}\r\n              onMouseDown={() => {\r\n                onRelationStart(\"startOfTask\", task);\r\n              }}\r\n            />\r\n            {/* right */}\r\n            <BarRelationHandle\r\n              isRelationDrawMode={isRelationDrawMode}\r\n              x={task.x2 + relationCircleOffset}\r\n              y={task.y + taskHalfHeight}\r\n              radius={relationCircleRadius}\r\n              onMouseDown={() => {\r\n                onRelationStart(\"endOfTask\", task);\r\n              }}\r\n            />\r\n          </g>\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./project.module.css\";\r\n//import { useProvideChipColors } from \"../../task-list/useProvideChipColors\";\r\nimport { HtmlTooltip } from \"../bar/bar\";\r\nimport { projectColors } from \"../../../helpers/resolve-project-color\";\r\n\r\nexport const Project: React.FC<TaskItemProps> = ({ task /* isSelected */ }) => {\r\n  //const { resolveChipColor, resolveChipLabelColor } = useProvideChipColors();\r\n  /* const barColor = isSelected\r\n    ? task.styles.backgroundSelectedColor\r\n    : task.styles.backgroundColor;\r\n  /*   const processColor = isSelected\r\n    ? task.styles.progressSelectedColor\r\n    : task.styles.progressColor; */\r\n  const projectWith = task.x2 - task.x1;\r\n\r\n  /*   const projectLeftTriangle = [\r\n    task.x1,\r\n    task.y + task.height / 2 - 1,\r\n    task.x1,\r\n    task.y + task.height,\r\n    task.x1 + 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n  const projectRightTriangle = [\r\n    task.x2,\r\n    task.y + task.height / 2 - 1,\r\n    task.x2,\r\n    task.y + task.height,\r\n    task.x2 - 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n */\r\n  return (\r\n    <HtmlTooltip\r\n      followCursor\r\n      title={\r\n        <React.Fragment>\r\n          <div style={{ margin: \"auto\" }}>\r\n            <div\r\n              style={{\r\n                padding: \"0.5rem 1rem\",\r\n                borderRadius: \"50px\",\r\n                fontWeight: \"600\",\r\n                fontSize: \"12px\",\r\n                maxHeight: \"30px\",\r\n                lineHeight: 1,\r\n                maxWidth: \"235px\",\r\n                overflow: \"hidden\",\r\n                wordWrap: \"break-word\",\r\n                whiteSpace: \"normal\",\r\n                textAlign: \"center\",\r\n              }}\r\n            >\r\n              {task.name}\r\n            </div>\r\n          </div>\r\n          <pre\r\n            className={styles.tooltipDefaultContainerParagraph}\r\n          >{`${task.start.getDate()}.${\r\n            task.start.getMonth() + 1\r\n          }.${task.start.getFullYear()} - ${task.end.getDate()}.${\r\n            task.end.getMonth() + 1\r\n          }.${task.end.getFullYear()}`}</pre>\r\n          {task.end.getTime() - task.start.getTime() !== 0 && (\r\n            <p\r\n              className={styles.tooltipDefaultContainerParagraph}\r\n            >{`Duration: ${~~(\r\n              (task.end.getTime() - task.start.getTime()) /\r\n              (1000 * 60 * 60 * 24)\r\n            )} day(s)`}</p>\r\n          )}\r\n\r\n          <p className={styles.tooltipDefaultContainerParagraph}>\r\n            {!!task.progress && `Progress: ${task.progress} %`}\r\n          </p>\r\n        </React.Fragment>\r\n      }\r\n    >\r\n      <g tabIndex={0} className={styles.projectWrapper}>\r\n        <rect\r\n          fill={projectColors[task.progressColor].fg} //COLOR OF !PROGRESS\r\n          x={task.x1}\r\n          width={projectWith}\r\n          y={task.y + 7}\r\n          height={5}\r\n          rx={task.barCornerRadius}\r\n          ry={task.barCornerRadius}\r\n          className={styles.projectBackground}\r\n        />\r\n        <rect\r\n          x={task.progressX}\r\n          width={task.progressWidth}\r\n          y={task.y + 7}\r\n          height={5}\r\n          ry={task.barCornerRadius}\r\n          rx={task.barCornerRadius}\r\n          fill={projectColors[task.progressColor].bg} //COLOR OF PROGRESS\r\n        />\r\n        {/* <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height / 2}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectTop}\r\n      /> */}\r\n        {/* <polygon\r\n        className={styles.projectTop}\r\n        points={projectLeftTriangle}\r\n        fill={barColor}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectRightTriangle}\r\n        fill={barColor}\r\n      /> */}\r\n      </g>\r\n    </HtmlTooltip>\r\n  );\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport {\r\n  GanttContentMoveAction,\r\n  RelationMoveTarget,\r\n} from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\nimport style from \"./task-list.module.css\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  taskHalfHeight: number;\r\n  relationCircleOffset: number;\r\n  relationCircleRadius: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isRelationChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  isRelationDrawMode: boolean;\r\n  rtl: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n  onRelationStart: (target: RelationMoveTarget, selectedTask: BarTask) => void;\r\n};\r\n\r\nexport const TaskItem: React.FC<TaskItemProps> = props => {\r\n  const {\r\n    task,\r\n    arrowIndent,\r\n    isDelete,\r\n    taskHeight,\r\n    isSelected,\r\n    isRelationDrawMode,\r\n    rtl,\r\n    onEventStart,\r\n  } = props;\r\n  const textRef = useRef<SVGTextElement>(null);\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n  const [isTextInside, setIsTextInside] = useState(true);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      /* case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break; */\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected, isRelationDrawMode, props]);\r\n\r\n  useEffect(() => {\r\n    if (textRef.current) {\r\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\r\n    }\r\n  }, [textRef, task]);\r\n\r\n  const getX = () => {\r\n    const width = task.x2 - task.x1;\r\n    const hasChild = task.barChildren.length > 0;\r\n    if (isTextInside) {\r\n      return task.x1 + width * 0.5;\r\n    }\r\n    if (rtl && textRef.current) {\r\n      return (\r\n        task.x1 -\r\n        textRef.current.getBBox().width -\r\n        arrowIndent * +hasChild -\r\n        arrowIndent * 0.2\r\n      );\r\n    } else {\r\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g\r\n      onKeyDown={e => {\r\n        switch (e.key) {\r\n          case \"Delete\": {\r\n            if (isDelete) onEventStart(\"delete\", task, e);\r\n            break;\r\n          }\r\n        }\r\n        e.stopPropagation();\r\n      }}\r\n      onMouseEnter={e => {\r\n        onEventStart(\"mouseenter\", task, e);\r\n      }}\r\n      onMouseLeave={e => {\r\n        onEventStart(\"mouseleave\", task, e);\r\n      }}\r\n      onDoubleClick={e => {\r\n        onEventStart(\"dblclick\", task, e);\r\n      }}\r\n      onClick={e => {\r\n        onEventStart(\"click\", task, e);\r\n      }}\r\n      onFocus={() => {\r\n        onEventStart(\"select\", task);\r\n      }}\r\n    >\r\n      {taskItem}\r\n      <text\r\n        x={getX()}\r\n        y={task.y + taskHeight * 0.5}\r\n        className={\r\n          isTextInside\r\n            ? style.barLabel\r\n            : style.barLabel && style.barLabelOutside\r\n        }\r\n        ref={textRef}\r\n      >\r\n        {/* {task.name} */}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { EventOption } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Arrow } from \"../other/arrow\";\r\nimport { RelationLine } from \"../other/relation-line\";\r\nimport { getRelationCircleByCoordinates } from \"../../helpers/get-relation-circle-by-coordinates\";\r\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\r\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\r\nimport { TaskItem } from \"../task-item/task-item\";\r\nimport {\r\n  BarMoveAction,\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n  GanttRelationEvent,\r\n  RelationMoveTarget,\r\n} from \"../../types/gantt-task-actions\";\r\n\r\nexport type TaskGanttContentProps = {\r\n  tasks: BarTask[];\r\n  dates: Date[];\r\n  ganttEvent: GanttEvent;\r\n  ganttRelationEvent: GanttRelationEvent | null;\r\n  selectedTask: BarTask | undefined;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  timeStep: number;\r\n  svg?: React.RefObject<SVGSVGElement>;\r\n  svgWidth: number;\r\n  taskHeight: number;\r\n  taskHalfHeight: number;\r\n  relationCircleOffset: number;\r\n  relationCircleRadius: number;\r\n  arrowColor: string;\r\n  arrowIndent: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  rtl: boolean;\r\n  setGanttEvent: (value: GanttEvent) => void;\r\n  setGanttRelationEvent: React.Dispatch<\r\n    React.SetStateAction<GanttRelationEvent | null>\r\n  >;\r\n  setFailedTask: (value: BarTask | null) => void;\r\n  setSelectedTask: (taskId: string) => void;\r\n} & EventOption;\r\n\r\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\r\n  tasks,\r\n  dates,\r\n  ganttEvent,\r\n  ganttRelationEvent,\r\n  selectedTask,\r\n  rowHeight,\r\n  columnWidth,\r\n  timeStep,\r\n  svg,\r\n  taskHeight,\r\n  taskHalfHeight,\r\n  relationCircleOffset,\r\n  relationCircleRadius,\r\n  arrowColor,\r\n  arrowIndent,\r\n  fontFamily,\r\n  fontSize,\r\n  rtl,\r\n  setGanttEvent,\r\n  setGanttRelationEvent,\r\n  setFailedTask,\r\n  setSelectedTask,\r\n  onDateChange,\r\n  onRelationChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onClick,\r\n  onDelete,\r\n}) => {\r\n  const point = svg?.current?.createSVGPoint();\r\n  const [xStep, setXStep] = useState(0);\r\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\r\n  const [isMoving, setIsMoving] = useState(false);\r\n\r\n  /* const allBarChildren: BarTask[] = getAllBarChildren(ganttEvent.changedTask);\r\n  console.log(allBarChildren); */\r\n  // create xStep\r\n  useEffect(() => {\r\n    const dateDelta =\r\n      dates[1].getTime() -\r\n      dates[0].getTime() -\r\n      dates[1].getTimezoneOffset() * 60 * 1000 +\r\n      dates[0].getTimezoneOffset() * 60 * 1000;\r\n    const newXStep = (timeStep * columnWidth) / dateDelta;\r\n    setXStep(newXStep);\r\n  }, [columnWidth, dates, timeStep]);\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = async (event: MouseEvent) => {\r\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n      console.log(\"TASKS:\", tasks);\r\n      const { isChanged, changedTask, changedTasks } =\r\n        handleTaskBySVGMouseEvent(\r\n          cursor.x,\r\n          ganttEvent.action as BarMoveAction,\r\n          ganttEvent.changedTask,\r\n          tasks,\r\n          xStep,\r\n          timeStep,\r\n          initEventX1Delta,\r\n          rtl\r\n        );\r\n      if (isChanged) {\r\n        console.log(\"CHT\", changedTask);\r\n        setGanttEvent({ action: ganttEvent.action, changedTask, changedTasks });\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = async (event: MouseEvent) => {\r\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\r\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\r\n        return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n\r\n      /* changedTask.prevStart = tasks.find(\r\n        task => task.id === changedTask.id\r\n      )?.start;\r\n      changedTask.prevEnd = tasks.find(task => task.id === changedTask.id)?.end; */\r\n\r\n      const { changedTask: newChangedTask, changedTasks } =\r\n        handleTaskBySVGMouseEvent(\r\n          cursor.x,\r\n          action as BarMoveAction,\r\n          changedTask,\r\n          tasks,\r\n          xStep,\r\n          timeStep,\r\n          initEventX1Delta,\r\n          rtl\r\n        );\r\n\r\n      const isNotLikeOriginal =\r\n        originalSelectedTask.start !== newChangedTask.start ||\r\n        originalSelectedTask.prevEnd !== newChangedTask.end ||\r\n        originalSelectedTask.progress !== newChangedTask.progress;\r\n\r\n      // remove listeners\r\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\r\n      setGanttEvent({ action: \"\" });\r\n      setIsMoving(false);\r\n      console.log(\"NCT\", newChangedTask);\r\n      // custom operation start\r\n      let operationSuccess = true;\r\n      console.log(\r\n        \"CONDITION\",\r\n        originalSelectedTask.start,\r\n        newChangedTask.start\r\n      );\r\n      if (\r\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\r\n        onDateChange &&\r\n        isNotLikeOriginal\r\n      ) {\r\n        try {\r\n          console.log(\"CODE0\", newChangedTask);\r\n          const result = await onDateChange(\r\n            newChangedTask,\r\n            newChangedTask.barChildren,\r\n            changedTasks\r\n          );\r\n          console.log(\"RESULT CONTENT\", result);\r\n          if (result !== undefined) {\r\n            console.log(\"SUCCESS\");\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          console.log(\"ERROR\");\r\n          operationSuccess = false;\r\n        }\r\n      } else if (onProgressChange && isNotLikeOriginal) {\r\n        try {\r\n          const result = await onProgressChange(\r\n            newChangedTask,\r\n            newChangedTask.barChildren\r\n          );\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      }\r\n\r\n      // If operation is failed - return old state\r\n      if (!operationSuccess) {\r\n        setFailedTask(originalSelectedTask);\r\n      }\r\n    };\r\n\r\n    if (\r\n      !isMoving &&\r\n      (ganttEvent.action === \"move\" ||\r\n        ganttEvent.action === \"end\" ||\r\n        ganttEvent.action === \"start\" ||\r\n        ganttEvent.action === \"progress\") &&\r\n      svg?.current\r\n    ) {\r\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\r\n\r\n      setIsMoving(true);\r\n    }\r\n  }, [\r\n    ganttEvent,\r\n    xStep,\r\n    initEventX1Delta,\r\n    onProgressChange,\r\n    timeStep,\r\n    onDateChange,\r\n    svg,\r\n    isMoving,\r\n    point,\r\n    rtl,\r\n    setFailedTask,\r\n    setGanttEvent,\r\n    tasks,\r\n  ]);\r\n\r\n  const startRelationTarget = ganttRelationEvent?.target;\r\n  const startRelationTask = ganttRelationEvent?.task;\r\n\r\n  /**\r\n   * Drag arrow\r\n   */\r\n  useEffect(() => {\r\n    if (!onRelationChange || !startRelationTarget || !startRelationTask) {\r\n      return undefined;\r\n    }\r\n\r\n    const svgNode = svg?.current;\r\n\r\n    if (!svgNode) {\r\n      return undefined;\r\n    }\r\n\r\n    if (!point) {\r\n      return undefined;\r\n    }\r\n\r\n    const handleMouseMove = (event: MouseEvent) => {\r\n      const { clientX, clientY } = event;\r\n\r\n      point.x = clientX;\r\n      point.y = clientY;\r\n\r\n      const ctm = svgNode.getScreenCTM();\r\n\r\n      if (!ctm) {\r\n        return;\r\n      }\r\n\r\n      const svgP = point.matrixTransform(ctm.inverse());\r\n\r\n      setGanttRelationEvent(prevValue => {\r\n        if (!prevValue) {\r\n          return null;\r\n        }\r\n\r\n        return {\r\n          ...prevValue,\r\n          endX: svgP.x,\r\n          endY: svgP.y,\r\n        };\r\n      });\r\n    };\r\n\r\n    const handleMouseUp = (event: MouseEvent) => {\r\n      const { clientX, clientY } = event;\r\n\r\n      point.x = clientX;\r\n      point.y = clientY;\r\n\r\n      const ctm = svgNode.getScreenCTM();\r\n\r\n      if (!ctm) {\r\n        return;\r\n      }\r\n\r\n      const svgP = point.matrixTransform(ctm.inverse());\r\n\r\n      const endTargetRelationCircle = getRelationCircleByCoordinates(\r\n        svgP,\r\n        tasks,\r\n        taskHalfHeight,\r\n        relationCircleOffset,\r\n        relationCircleRadius,\r\n        rtl\r\n      );\r\n\r\n      if (endTargetRelationCircle) {\r\n        onRelationChange(\r\n          [startRelationTask, startRelationTarget],\r\n          endTargetRelationCircle\r\n        );\r\n      }\r\n\r\n      setGanttRelationEvent(null);\r\n    };\r\n\r\n    svgNode.addEventListener(\"mousemove\", handleMouseMove);\r\n    svgNode.addEventListener(\"mouseup\", handleMouseUp);\r\n\r\n    return () => {\r\n      svgNode.removeEventListener(\"mousemove\", handleMouseMove);\r\n      svgNode.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n  }, [\r\n    svg,\r\n    rtl,\r\n    point,\r\n    startRelationTarget,\r\n    startRelationTask,\r\n    setGanttRelationEvent,\r\n    tasks,\r\n    taskHalfHeight,\r\n    relationCircleOffset,\r\n    relationCircleRadius,\r\n    onRelationChange,\r\n  ]);\r\n\r\n  /**\r\n   * Method is Start point of task change\r\n   */\r\n  const handleBarEventStart = async (\r\n    action: GanttContentMoveAction,\r\n    task: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => {\r\n    if (!event) {\r\n      if (action === \"select\") {\r\n        setSelectedTask(task.id);\r\n      }\r\n    }\r\n    // Keyboard events\r\n    else if (isKeyboardEvent(event)) {\r\n      if (action === \"delete\") {\r\n        if (onDelete) {\r\n          try {\r\n            const result = await onDelete(task);\r\n            if (result !== undefined && result) {\r\n              setGanttEvent({ action, changedTask: task });\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error on Delete. \" + error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Mouse Events\r\n    else if (action === \"mouseenter\") {\r\n      if (!ganttEvent.action) {\r\n        setGanttEvent({\r\n          action,\r\n          changedTask: task,\r\n          originalSelectedTask: task,\r\n        });\r\n      }\r\n    } else if (action === \"mouseleave\") {\r\n      if (ganttEvent.action === \"mouseenter\") {\r\n        setGanttEvent({ action: \"\" });\r\n      }\r\n    } else if (action === \"dblclick\") {\r\n      !!onDoubleClick && onDoubleClick(task);\r\n    } else if (action === \"click\") {\r\n      !!onClick && onClick(task);\r\n    }\r\n    // Change task event start\r\n    else if (action === \"move\") {\r\n      if (!svg?.current || !point) return;\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg.current.getScreenCTM()?.inverse()\r\n      );\r\n      setInitEventX1Delta(cursor.x - task.x1);\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n      console.log(task);\r\n      console.log(tasks);\r\n    } else {\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleBarRelationStart = useCallback(\r\n    (target: RelationMoveTarget, task: BarTask) => {\r\n      const startX =\r\n        (target === \"startOfTask\") !== rtl ? task.x1 - 10 : task.x2 + 10;\r\n      const startY = task.y + Math.round(task.height / 2);\r\n\r\n      setGanttRelationEvent({\r\n        target,\r\n        task,\r\n        startX,\r\n        startY,\r\n        endX: startX,\r\n        endY: startY,\r\n      });\r\n    },\r\n    [setGanttRelationEvent, rtl]\r\n  );\r\n\r\n  return (\r\n    <g className=\"content\">\r\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\r\n        {tasks.map(task => {\r\n          return task.barChildren.map(child => {\r\n            return (\r\n              <Arrow\r\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\r\n                taskFrom={task}\r\n                taskTo={tasks[child.index]}\r\n                rowHeight={rowHeight}\r\n                taskHeight={taskHeight}\r\n                arrowIndent={arrowIndent}\r\n                rtl={rtl}\r\n              />\r\n            );\r\n          });\r\n        })}\r\n      </g>\r\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\r\n        {tasks.map(task => {\r\n          return (\r\n            <TaskItem\r\n              task={task}\r\n              arrowIndent={arrowIndent}\r\n              taskHeight={taskHeight}\r\n              taskHalfHeight={taskHalfHeight}\r\n              relationCircleOffset={relationCircleOffset}\r\n              relationCircleRadius={relationCircleRadius}\r\n              isRelationDrawMode={Boolean(ganttRelationEvent)}\r\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\r\n              isDateChangeable={!!onDateChange && !task.isDisabled}\r\n              isRelationChangeable={!!onRelationChange && !task.isDisabled}\r\n              isDelete={!task.isDisabled}\r\n              onEventStart={handleBarEventStart}\r\n              onRelationStart={handleBarRelationStart}\r\n              key={task.id}\r\n              isSelected={!!selectedTask && task.id === selectedTask.id}\r\n              rtl={rtl}\r\n            />\r\n          );\r\n        })}\r\n      </g>\r\n      {ganttRelationEvent && (\r\n        <RelationLine\r\n          x1={ganttRelationEvent.startX}\r\n          x2={ganttRelationEvent.endX}\r\n          y1={ganttRelationEvent.startY}\r\n          y2={ganttRelationEvent.endY}\r\n        />\r\n      )}\r\n    </g>\r\n  );\r\n};\r\n\r\n/* function getAllBarChildren(obj: BarTask | undefined) {\r\n  let barChildrenList: BarTask[] = [];\r\n\r\n  if (obj && obj.barChildren && obj.barChildren.length > 0) {\r\n    barChildrenList = barChildrenList.concat(obj.barChildren);\r\n    obj.barChildren.forEach(child => {\r\n      barChildrenList = barChildrenList.concat(getAllBarChildren(child));\r\n    });\r\n  }\r\n\r\n  return barChildrenList;\r\n} */\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { GridProps, Grid } from \"../grid/grid\";\r\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport type TaskGanttProps = {\r\n  gridProps: GridProps;\r\n  calendarProps: CalendarProps;\r\n  barProps: TaskGanttContentProps;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  scrollX: number;\r\n};\r\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\r\n  gridProps,\r\n  calendarProps,\r\n  barProps,\r\n  ganttHeight,\r\n  scrollY,\r\n  scrollX,\r\n}) => {\r\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\r\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\r\n\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  useEffect(() => {\r\n    if (verticalGanttContainerRef.current) {\r\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\r\n    }\r\n  }, [scrollX]);\r\n\r\n  return (\r\n    <div\r\n      className={styles.ganttVerticalContainerChanged}\r\n      ref={verticalGanttContainerRef}\r\n      dir=\"ltr\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={gridProps.svgWidth}\r\n        height={calendarProps.headerHeight}\r\n        fontFamily={barProps.fontFamily}\r\n      >\r\n        <Calendar {...calendarProps} />\r\n      </svg>\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={styles.horizontalContainer}\r\n        style={\r\n          ganttHeight\r\n            ? { height: ganttHeight, width: gridProps.svgWidth }\r\n            : { width: gridProps.svgWidth }\r\n        }\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={barProps.rowHeight * barProps.tasks.length}\r\n          fontFamily={barProps.fontFamily}\r\n          ref={ganttSVGRef}\r\n        >\r\n          <Grid {...gridProps} />\r\n          <TaskGanttContent {...newBarProps} />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, {\r\n  useState,\r\n  SyntheticEvent,\r\n  useRef,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\";\r\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\r\nimport { GridProps } from \"../grid/grid\";\r\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\r\nimport { CalendarProps } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\r\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\r\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\r\n/* import { StandardTooltipContent  Tooltip } from \"../other/tooltip\"; */\r\nimport { VerticalScroll } from \"../other/vertical-scroll\";\r\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\r\nimport { TaskGantt } from \"./task-gantt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\r\nimport { GanttEvent, GanttRelationEvent } from \"../../types/gantt-task-actions\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\n/* import { HorizontalScroll } from \"../other/horizontal-scroll\"; */\r\nimport { removeHiddenTasks, sortTasks } from \"../../helpers/other-helper\";\r\nimport styles from \"./gantt.module.css\";\r\n/* import { HorizontalScroll } from \"../other/horizontal-scroll\"; */\r\n\r\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\r\n  tasks,\r\n  headerHeight = 50,\r\n  columnWidth = 60,\r\n  listCellWidth = \"155px\",\r\n  rowHeight = 50,\r\n  relationCircleOffset = 10,\r\n  relationCircleRadius = 5,\r\n  ganttHeight = 0,\r\n  viewMode = ViewMode.Day,\r\n  preStepsCount = 1,\r\n  locale = \"en-GB\",\r\n  barFill = 60,\r\n  barCornerRadius = 3,\r\n  barProgressColor = \"#a3a3ff\",\r\n  barProgressSelectedColor = \"#8282f5\",\r\n  barBackgroundColor = \"#b8c2cc\",\r\n  barBackgroundSelectedColor = \"#aeb8c2\",\r\n  projectProgressColor = \"#7db59a\",\r\n  projectProgressSelectedColor = \"#59a985\",\r\n  projectBackgroundColor = \"#fac465\",\r\n  projectBackgroundSelectedColor = \"#f7bb53\",\r\n  milestoneBackgroundColor = \"#f1c453\",\r\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\r\n  rtl = false,\r\n  handleWidth = 8,\r\n  timeStep = 300000,\r\n  arrowColor = \"grey\",\r\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\r\n  fontSize = \"14px\",\r\n  arrowIndent = 20,\r\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\r\n  viewDate,\r\n  /*   TooltipContent = StandardTooltipContent, */\r\n  TaskListHeader = TaskListHeaderDefault,\r\n  TaskListTable = TaskListTableDefault,\r\n  onDateChange,\r\n  onRelationChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onClick,\r\n  onDelete,\r\n  onSelect,\r\n  onExpanderClick,\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const taskListRef = useRef<HTMLDivElement>(null);\r\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\r\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode, preStepsCount);\r\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\r\n  });\r\n  const [currentViewDate, setCurrentViewDate] = useState<Date | undefined>(\r\n    undefined\r\n  );\r\n\r\n  /*   const [taskListWidth, setTaskListWidth] = useState(0); */\r\n  /*   const [svgContainerWidth, setSvgContainerWidth] = useState(0);\r\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight); */\r\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\r\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\r\n    action: \"\",\r\n  });\r\n\r\n  const [ganttRelationEvent, setGanttRelationEvent] =\r\n    useState<GanttRelationEvent | null>(null);\r\n\r\n  const taskHeight = useMemo(\r\n    () => (rowHeight * barFill) / 100,\r\n    [rowHeight, barFill]\r\n  );\r\n\r\n  const taskHalfHeight = useMemo(\r\n    () => Math.round(taskHeight / 2),\r\n    [taskHeight]\r\n  );\r\n\r\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\r\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\r\n\r\n  const svgWidth = dateSetup.dates.length * columnWidth;\r\n  const ganttFullHeight = barTasks.length * rowHeight;\r\n\r\n  const [scrollY, setScrollY] = useState(0);\r\n  const [scrollX, setScrollX] = useState(-1);\r\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\r\n\r\n  // task change events\r\n  useEffect(() => {\r\n    let filteredTasks: Task[];\r\n    if (onExpanderClick) {\r\n      filteredTasks = removeHiddenTasks(tasks);\r\n    } else {\r\n      filteredTasks = tasks;\r\n    }\r\n    filteredTasks = filteredTasks.sort(sortTasks);\r\n    const [startDate, endDate] = ganttDateRange(\r\n      filteredTasks,\r\n      viewMode,\r\n      preStepsCount\r\n    );\r\n    let newDates = seedDates(startDate, endDate, viewMode);\r\n    if (rtl) {\r\n      newDates = newDates.reverse();\r\n      if (scrollX === -1) {\r\n        setScrollX(newDates.length * columnWidth);\r\n      }\r\n    }\r\n    setDateSetup({ dates: newDates, viewMode });\r\n    setBarTasks(\r\n      convertToBarTasks(\r\n        filteredTasks,\r\n        newDates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      )\r\n    );\r\n  }, [\r\n    tasks,\r\n    viewMode,\r\n    preStepsCount,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n    rtl,\r\n    onExpanderClick,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      viewMode === dateSetup.viewMode &&\r\n      ((viewDate && !currentViewDate) ||\r\n        (viewDate && currentViewDate?.valueOf() !== viewDate.valueOf()))\r\n    ) {\r\n      const dates = dateSetup.dates;\r\n      const index = dates.findIndex(\r\n        (d, i) =>\r\n          viewDate.valueOf() >= d.valueOf() &&\r\n          i + 1 !== dates.length &&\r\n          viewDate.valueOf() < dates[i + 1].valueOf()\r\n      );\r\n      if (index === -1) {\r\n        return;\r\n      }\r\n      setCurrentViewDate(viewDate);\r\n      setScrollX(columnWidth * index);\r\n    }\r\n  }, [\r\n    viewDate,\r\n    columnWidth,\r\n    dateSetup.dates,\r\n    dateSetup.viewMode,\r\n    viewMode,\r\n    currentViewDate,\r\n    setCurrentViewDate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const { changedTask, action, changedTasks } = ganttEvent;\r\n    if (changedTask) {\r\n      if (action === \"delete\") {\r\n        setGanttEvent({ action: \"\" });\r\n\r\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\r\n      } else if (\r\n        action === \"move\" ||\r\n        action === \"end\" ||\r\n        action === \"start\" ||\r\n        action === \"progress\"\r\n      ) {\r\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\r\n        if (\r\n          prevStateTask &&\r\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\r\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\r\n            prevStateTask.progress !== changedTask.progress)\r\n        ) {\r\n          console.log(\"CHANGED TASKS\", changedTasks);\r\n\r\n          if (\r\n            changedTasks?.length !== 0 &&\r\n            changedTasks?.length !== undefined\r\n          ) {\r\n            console.log(\"CHANGED TASKSTEST\", changedTasks);\r\n\r\n            const mergedArray = barTasks.map(barTask => {\r\n              const changedItem = changedTasks.find(\r\n                item => item.id === barTask.id\r\n              );\r\n              console.log(\"CHITM\", changedItem);\r\n              if (changedItem) {\r\n                console.log({\r\n                  ...barTask,\r\n                  ...changedItem,\r\n                  //offset: changedItem.x1 - barTasks[1].x1,\r\n                });\r\n                return {\r\n                  ...barTask,\r\n                  ...changedItem,\r\n                  //offset: changedItem.x1 - barTasks[1].x1,\r\n                };\r\n              } else {\r\n                return barTask;\r\n              }\r\n            });\r\n            setBarTasks(mergedArray);\r\n            //setBarTasks(changedTasks);\r\n            console.log(\"BAR TASKS\", mergedArray);\r\n          } else {\r\n            const newTaskList = barTasks.map(t =>\r\n              t.id === changedTask.id ? changedTask : t\r\n            );\r\n            setBarTasks(newTaskList);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [barTasks, ganttEvent]);\r\n\r\n  useEffect(() => {\r\n    if (failedTask) {\r\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\r\n      setFailedTask(null);\r\n    }\r\n  }, [failedTask, barTasks]);\r\n\r\n  /*   useEffect(() => {\r\n    if (!listCellWidth) {\r\n      setTaskListWidth(0);\r\n    }\r\n    if (taskListRef.current) {\r\n      setTaskListWidth(taskListRef.current.offsetWidth);\r\n    }\r\n  }, [taskListRef, listCellWidth]); */\r\n\r\n  /*   useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\r\n    }\r\n  }, [wrapperRef, taskListWidth]);\r\n\r\n  useEffect(() => {\r\n    if (ganttHeight) {\r\n      setSvgContainerHeight(ganttHeight + headerHeight);\r\n    } else {\r\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\r\n    }\r\n  }, [ganttHeight, tasks, headerHeight, rowHeight]); */\r\n\r\n  // scroll events\r\n  useEffect(() => {\r\n    const handleWheel = (event: WheelEvent) => {\r\n      if (event.shiftKey || event.deltaX) {\r\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\r\n        let newScrollX = scrollX + scrollMove;\r\n        if (newScrollX < 0) {\r\n          newScrollX = 0;\r\n        } else if (newScrollX > svgWidth) {\r\n          newScrollX = svgWidth;\r\n        }\r\n        setScrollX(newScrollX);\r\n        event.preventDefault();\r\n      } else if (ganttHeight) {\r\n        let newScrollY = scrollY + event.deltaY;\r\n        if (newScrollY < 0) {\r\n          newScrollY = 0;\r\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n          newScrollY = ganttFullHeight - ganttHeight;\r\n        }\r\n        if (newScrollY !== scrollY) {\r\n          setScrollY(newScrollY);\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n      setIgnoreScrollEvent(true);\r\n    };\r\n\r\n    // subscribe if scroll is necessary\r\n    wrapperRef.current?.addEventListener(\"wheel\", handleWheel, {\r\n      passive: false,\r\n    });\r\n    return () => {\r\n      wrapperRef.current?.removeEventListener(\"wheel\", handleWheel);\r\n    };\r\n  }, [\r\n    wrapperRef,\r\n    scrollY,\r\n    scrollX,\r\n    ganttHeight,\r\n    svgWidth,\r\n    rtl,\r\n    ganttFullHeight,\r\n  ]);\r\n\r\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\r\n      setScrollY(event.currentTarget.scrollTop);\r\n      setIgnoreScrollEvent(true);\r\n    } else {\r\n      setIgnoreScrollEvent(false);\r\n    }\r\n  };\r\n\r\n  /*    const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\r\n      setScrollX(event.currentTarget.scrollLeft);\r\n      setIgnoreScrollEvent(true);\r\n    } else {\r\n      setIgnoreScrollEvent(false);\r\n    }\r\n  };  */\r\n\r\n  /**\r\n   * Handles arrow keys events and transform it to new scroll\r\n   */\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    let newScrollY = scrollY;\r\n    let newScrollX = scrollX;\r\n    let isX = true;\r\n    switch (event.key) {\r\n      case \"Down\": // IE/Edge specific value\r\n      case \"ArrowDown\":\r\n        newScrollY += rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Up\": // IE/Edge specific value\r\n      case \"ArrowUp\":\r\n        newScrollY -= rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Left\":\r\n      case \"ArrowLeft\":\r\n        newScrollX -= columnWidth;\r\n        break;\r\n      case \"Right\": // IE/Edge specific value\r\n      case \"ArrowRight\":\r\n        newScrollX += columnWidth;\r\n        break;\r\n    }\r\n    if (isX) {\r\n      if (newScrollX < 0) {\r\n        newScrollX = 0;\r\n      } else if (newScrollX > svgWidth) {\r\n        newScrollX = svgWidth;\r\n      }\r\n      setScrollX(newScrollX);\r\n    } else {\r\n      if (newScrollY < 0) {\r\n        newScrollY = 0;\r\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n        newScrollY = ganttFullHeight - ganttHeight;\r\n      }\r\n      setScrollY(newScrollY);\r\n    }\r\n    setIgnoreScrollEvent(true);\r\n  };\r\n\r\n  /**\r\n   * Task select event\r\n   */\r\n  const handleSelectedTask = (taskId: string) => {\r\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\r\n    const oldSelectedTask = barTasks.find(\r\n      t => !!selectedTask && t.id === selectedTask.id\r\n    );\r\n    if (onSelect) {\r\n      if (oldSelectedTask) {\r\n        onSelect(oldSelectedTask, false);\r\n      }\r\n      if (newSelectedTask) {\r\n        onSelect(newSelectedTask, true);\r\n      }\r\n    }\r\n    setSelectedTask(newSelectedTask);\r\n  };\r\n  const handleExpanderClick = (task: Task) => {\r\n    if (onExpanderClick && task.hideChildren !== undefined) {\r\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\r\n    }\r\n  };\r\n  const gridProps: GridProps = {\r\n    columnWidth,\r\n    svgWidth,\r\n    tasks: tasks,\r\n    rowHeight,\r\n    dates: dateSetup.dates,\r\n    todayColor,\r\n    rtl,\r\n  };\r\n  const calendarProps: CalendarProps = {\r\n    dateSetup,\r\n    locale,\r\n    viewMode,\r\n    headerHeight,\r\n    columnWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    rtl,\r\n  };\r\n  const barProps: TaskGanttContentProps = {\r\n    tasks: barTasks,\r\n    dates: dateSetup.dates,\r\n    ganttEvent,\r\n    ganttRelationEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    taskHeight,\r\n    taskHalfHeight,\r\n    relationCircleOffset,\r\n    relationCircleRadius,\r\n    columnWidth,\r\n    arrowColor,\r\n    timeStep,\r\n    fontFamily,\r\n    fontSize,\r\n    arrowIndent,\r\n    svgWidth,\r\n    rtl,\r\n    setGanttEvent,\r\n    setGanttRelationEvent,\r\n    setFailedTask,\r\n    setSelectedTask: handleSelectedTask,\r\n    onDateChange,\r\n    onRelationChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onClick,\r\n    onDelete,\r\n  };\r\n\r\n  const tableProps: TaskListProps = {\r\n    rowHeight,\r\n    rowWidth: listCellWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks: barTasks,\r\n    locale,\r\n    headerHeight,\r\n    scrollY,\r\n    ganttHeight,\r\n    horizontalContainerClass: styles.horizontalContainer,\r\n    selectedTask,\r\n    taskListRef,\r\n    setSelectedTask: handleSelectedTask,\r\n    onExpanderClick: handleExpanderClick,\r\n    TaskListHeader,\r\n    TaskListTable,\r\n  };\r\n  return (\r\n    <div>\r\n      <div\r\n        className={styles.wrapper}\r\n        onKeyDown={handleKeyDown}\r\n        tabIndex={0}\r\n        ref={wrapperRef}\r\n      >\r\n        {listCellWidth && <TaskList {...tableProps} />}\r\n        <TaskGantt\r\n          gridProps={gridProps}\r\n          calendarProps={calendarProps}\r\n          barProps={barProps}\r\n          ganttHeight={ganttHeight}\r\n          scrollY={scrollY}\r\n          scrollX={scrollX}\r\n        />\r\n        {/* {ganttEvent.changedTask && (\r\n          <Tooltip\r\n            arrowIndent={arrowIndent}\r\n            rowHeight={rowHeight}\r\n            svgContainerHeight={svgContainerHeight}\r\n            svgContainerWidth={svgContainerWidth}\r\n            fontFamily={fontFamily}\r\n            fontSize={fontSize}\r\n            scrollX={scrollX}\r\n            scrollY={scrollY}\r\n            task={ganttEvent.changedTask}\r\n            headerHeight={300}\r\n            taskListWidth={taskListWidth}\r\n            TooltipContent={TooltipContent}\r\n            rtl={rtl}\r\n            svgWidth={svgWidth}\r\n          />\r\n        )} */}\r\n        <VerticalScroll\r\n          ganttFullHeight={ganttFullHeight}\r\n          ganttHeight={ganttHeight}\r\n          headerHeight={headerHeight}\r\n          scroll={scrollY}\r\n          onScroll={handleScrollY}\r\n          rtl={rtl}\r\n        />\r\n      </div>\r\n      {/* <HorizontalScroll\r\n        svgWidth={svgWidth}\r\n        taskListWidth={taskListWidth}\r\n        scroll={scrollX}\r\n        rtl={rtl}\r\n        onScroll={handleScrollX}\r\n      /> */}\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","preStepsCount","newStartDate","start","newEndDate","_iterator","_createForOfIteratorHelperLoose","_step","done","task","value","end","Year","Month","Week","getMonday","Day","QuarterDay","HalfDay","Hour","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","getLocalDayOfWeek","weekday","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TaskListHeaderDefault","_ref","headerHeight","fontFamily","fontSize","rowWidth","React","className","styles","ganttTable","style","ganttTable_Header","height","ganttTable_HeaderItem","minWidth","ganttTable_HeaderSeparator","marginTop","textAlign","chipColors","blue","text","background","yellow","green","red","purple","brown","rose","kaki","orange","useProvideChipColors","resolveChipColor","badgeColor","badgeTitle","undefined","resolveChipLabelColor","localeDateStringCache","toLocaleDateStringFactory","dateTimeOptions","lds","toLocaleDateString","formatDate","inputDate","dateObject","TaskListTableDefault","rowHeight","onExpanderClick","_useProvideChipColors","useMemo","taskListWrapper","map","t","expanderSymbol","hideChildren","ExpandMoreIcon","ChevronRightIcon","match","id","result","projectId","taskListTableRow","taskListCell","maxWidth","title","name","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","type","display","flexDirection","fontWeight","maxHeight","lineHeight","overflow","wordWrap","whiteSpace","projectManager","href","color","cursor","textDecoration","padding","borderRadius","marginLeft","width","split","join","VerticalScroll","scroll","ganttHeight","ganttFullHeight","rtl","onScroll","scrollRef","useRef","useEffect","current","scrollTop","ref","TaskList","scrollY","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","TaskListHeader","TaskListTable","horizontalContainerRef","headerProps","selectedTaskId","tableProps","GridBody","svgWidth","columnWidth","todayColor","y","gridRows","rowLines","x","y1","x2","y2","gridRowLine","gridRow","now","tickX","ticks","today","i","getTime","x1","gridTick","fill","Grid","props","TopPartOfCalendar","x1Line","y1Line","y2Line","xText","yText","calendarTopTick","calendarTopText","Calendar","dateSetup","getCalendarValuesForYear","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","getWeekNumber","d","UTC","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","weekNo","getCalendarValuesForMonth","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","middleValues","middleValue","calendarMiddleText","toUpperCase","getCalendarValuesForPartOfDay","hour","getCalendarValuesForHour","displayDate","topPosition","_getCalendarValuesFor","_getCalendarValuesFor2","_getCalendarValuesFor3","_getCalendarValuesFor4","_getCalendarValuesFor5","_getCalendarValuesFor6","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","arrowIndent","path","trianglePoints","_drownPathAndTriangle","drownPathAndTriangleRTL","_drownPathAndTriangle2","drownPathAndTriangle","strokeWidth","points","indexCompare","index","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","RelationLine","relationLine","getRelationCircleByCoordinates","svgP","taskHalfHeight","relationCircleOffset","relationCircleRadius","l","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","barTasks","convertToBarTask","console","log","dependencies","_loop","j","dependence","findIndex","barChildren","offset","barTask","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","_progressWithByParams","progressWithByParams","progress","progressWidth","progressX","taskYCoordinate","_extends","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","rotatedHeight","xDate","remainderMillis","percentOfInterval","taskX1","taskX2","progressByX","barWidth","progressPercent","round","progressByXRTL","getProgressPoint","taskY","point","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","prevTask","newX1","newX2","moveByXForEach","newMoveX1","taskOffset","selectedTaskOffset","newTaskOffset","newX1Test","newX2Test","dateByX","taskX","taskDate","timeStep","getTimezoneOffset","handleTaskBySVGMouseEvent","svgX","action","initEventX1Delta","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTasks","changedTask","isChanged","_progressWithByParams2","_progressWithByParams3","_progressWithByParams4","prevDependentTask","filter","item","_selectedTask$depende","includes","pop","_moveByX","newMoveX2","_progressWithByParams5","childrenIds","getAllBarChildrenIds","_moveByXForEach","_progressWithByParams6","prevTaskIndex","_moveByX2","obj","ids","child","concat","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","groupedTask","children","getChildren","taskList","project","taskChildren","forEach","apply","sortTasks","taskA","taskB","orderA","displayOrder","Number","MAX_VALUE","orderB","BarDisplay","isSelected","onMouseDown","ry","rx","barBackground","BarDateHandle","barHandle","BarRelationHandle","radius","isRelationDrawMode","cx","cy","r","barRelationHandle","_cx","barRelationHandle_drawMode","BarProgressHandle","progressPoint","projectColors","bg","fg","HtmlTooltip","styled","_objectWithoutPropertiesLoose","_excluded","Tooltip","classes","popper","_ref2","tooltipClasses","tooltip","boxShadow","Bar","_ref3","isProgressChangeable","isDateChangeable","isRelationChangeable","onEventStart","onRelationStart","onLeftRelationTriggerMouseDown","useCallback","onRightRelationTriggerMouseDown","handleHeight","taskStyle","placement","followCursor","Fragment","Typography","margin","tooltipDefaultContainerParagraph","barWrapper","stylesRelationHandle","barRelationHandleWrapper","tabIndex","e","Milestone","transform","getBarColor","milestoneWrapper","milestoneBackground","Project","projectWith","projectWrapper","projectBackground","TaskItem","isDelete","textRef","_useState","useState","taskItem","setTaskItem","_useState2","isTextInside","setIsTextInside","getBBox","getX","hasChild","onKeyDown","stopPropagation","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","barLabel","barLabelOutside","TaskGanttContent","ganttEvent","ganttRelationEvent","svg","arrowColor","setGanttEvent","setGanttRelationEvent","setFailedTask","onDateChange","onRelationChange","onProgressChange","onDelete","_svg$current","createSVGPoint","setXStep","setInitEventX1Delta","_useState3","isMoving","setIsMoving","dateDelta","newXStep","handleMouseMove","Promise","resolve","preventDefault","clientX","matrixTransform","_svg$current$getScree","getScreenCTM","inverse","_handleTaskBySVGMouse","reject","handleMouseUp","operationSuccess","originalSelectedTask","_svg$current$getScree2","_handleTaskBySVGMouse2","newChangedTask","isNotLikeOriginal","prevEnd","removeEventListener","_temp4","_temp","_catch","then","_temp6","_temp2","_temp5","addEventListener","startRelationTarget","target","startRelationTask","svgNode","clientY","ctm","prevValue","endX","endY","endTargetRelationCircle","handleBarEventStart","_temp9","_temp8","_temp7","error","_svg$current$getScree3","handleBarRelationStart","startX","startY","stroke","Boolean","isDisabled","TaskGantt","gridProps","calendarProps","barProps","scrollX","ganttSVGRef","verticalGanttContainerRef","newBarProps","scrollLeft","ganttVerticalContainerChanged","dir","xmlns","horizontalContainer","Gantt","_ref$headerHeight","_ref$columnWidth","_ref$listCellWidth","listCellWidth","_ref$rowHeight","_ref$relationCircleOf","_ref$relationCircleRa","_ref$ganttHeight","_ref$viewMode","_ref$preStepsCount","_ref$locale","_ref$barFill","barFill","_ref$barCornerRadius","_ref$barProgressColor","_ref$barProgressSelec","_ref$barBackgroundCol","_ref$barBackgroundSel","_ref$projectProgressC","_ref$projectProgressS","_ref$projectBackgroun","_ref$projectBackgroun2","_ref$milestoneBackgro","_ref$milestoneBackgro2","_ref$rtl","_ref$handleWidth","_ref$timeStep","_ref$arrowColor","_ref$fontFamily","_ref$fontSize","_ref$arrowIndent","_ref$todayColor","viewDate","_ref$TaskListHeader","_ref$TaskListTable","onSelect","wrapperRef","_ganttDateRange","setDateSetup","currentViewDate","setCurrentViewDate","setBarTasks","_useState4","_useState5","_useState6","_useState7","failedTask","_useState8","setScrollY","_useState9","setScrollX","_useState10","ignoreScrollEvent","setIgnoreScrollEvent","filteredTasks","sort","_ganttDateRange2","newDates","reverse","prevStateTask","find","mergedArray","changedItem","newTaskList","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","newScrollY","_wrapperRef$current","passive","_wrapperRef$current2","handleScrollY","currentTarget","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","wrapper"],"mappings":"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"}